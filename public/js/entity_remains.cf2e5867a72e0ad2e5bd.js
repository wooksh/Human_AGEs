/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 802:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_cache.bfc303040cee293a669d.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 1087:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_events.60c0eb2f0a6a8095526b.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 9712:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_legend.d366e5a143ce485a92af.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 3838:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_map.46512d4c54b1c2cad88a.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 8785:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_requests.83b8a08e76a8c1bf870c.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 481:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_search.ae8da8dc7fcbbe88b9dc.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 3678:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_session.5586379f38ef0b8a0948.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 727:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_ui.353aee23863a537cfc53.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 6603:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Farcheo_utilities.45915d87ae1effb41b41.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 2686:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fentity_remains.5eba7ce403336d4891a8.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 8328:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Clink defer rel=\"stylesheet\" href=\"\u002Fcss\u002Fentity_remains.3be1f3658986fa38dfa2.css\"\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 4161:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Clink defer rel=\"stylesheet\" href=\"\u002Fcss\u002Fmodules.eff6e00d71d50300030c.css\"\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 4459:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-25535252.e7e8ce38935aef740527.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-227ad97a.fcfd0773c63a75a943f2.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-bcc71cef.3cd9c68272a9f054642e.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-3721061d.266009622dac8bea2b0a.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-8fb3d2e1.439058f2db3c8c11d8b8.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-a35007e9.d54218ebc8ff3334b745.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-3dbaccc5.734dfd99bba654f0ecbd.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-a33e9691.d6154bbbb130d908d841.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-e5fb8f5d.825a861af70a17ec0121.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-034d289d.0e61c5ae9666eede521e.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-cf3fe87f.c48d97372e6570907a94.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-c0edc6da.6d000cfdafdcd8baf9fb.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-70675959.c472de4d20cf23fef3eb.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-8c35d8b7.45197c6d597340983523.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-88034504.49b2b87e9999efec6cbf.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-cbc44e46.ae35cc69e5ffba3d668a.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-cfe4622e.14ee77cb8d652998a4f6.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-2701b9eb.9747f4a6a08d699e863d.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-5a739dd6.3102cb18df1fc7690f35.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-1c6459ff.cf71e416fcf8a204965f.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Fol-62c0e40e.5418309fd51b3bcc12df.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 8635:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"\u002Fjs\u002Ftemplate_basic.bfc201e53652c13ee649.js\"\u003E\u003C\u002Fscript\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 7520:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;pug_html = pug_html + "\u003Clink defer rel=\"stylesheet\" href=\"\u002Fcss\u002Ftemplate_basic.922bf98eeee618b42944.css\"\u003E";;return pug_html;};
module.exports = template;

/***/ }),

/***/ 6222:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;var regionsDic = {
    'cultures': {
        'name': 'Archeological culture',
        'title': 'Archeological culture',
        'subtext': 'archeological division'
    },
    'continents': {
        'name': 'Continent',
        'title': 'Continent',
        'subtext': 'geographical division'
    },
    'wb_regions': {
        'name': 'World Bank Region',
        'title': 'World Bank Region',
        'subtext': 'political division'
    },
    'un_regions': {
        'name': 'United Nations Region',
        'title': 'United Nations Region',
        'subtext': 'political division'
    },
    'un_subregions': {
        'name': 'United Nations Subregion',
        'title': 'United Nations Subregion',
        'subtext': 'political division'
    },
    'countries': {
        'name': 'Country',
        'title': 'Country',
        'subtext': 'political division'
    }
};;return pug_html;};
module.exports = template;

/***/ }),

/***/ 6940:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (JSON, Math, Object, addSpinner, buttonTitle, databaseId, databaseName, dictionary, entityData, entityDbName, entityId, entityName, entityType, iconName, lang, mapOptions, metadata, pageName, regionsDic, remains, spinnerText, text, toString, year_end, year_start) {
      pug_html = pug_html + "\u003C!DOCTYPE html\u003E\u003Chtml" + (pug.attr("lang", lang, true, true)) + "\u003E\u003Chead\u003E\u003Cmeta charset=\"utf-8\"\u003E\u003Cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003E\u003Cmeta http-equiv=\"X-UA-Compatible\" content=\"text\u002Fhtml; charset=utf-8\"\u003E\u003Cmeta name=\"robots\" content=\"noindex\"\u003E\u003Clink rel=\"shortcut icon\" href=\"#\"\u003E\u003Clink rel=\"stylesheet\" href=\"https:\u002F\u002Ffonts.googleapis.com\u002Ficon?family=Material+Icons\"\u003E\u003Clink rel=\"stylesheet\" href=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fbootstrap@4.5.3\u002Fdist\u002Fcss\u002Fbootstrap.min.css\" integrity=\"sha384-TX8t27EcRE3e\u002FihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2\" crossorigin=\"anonymous\"\u003E\u003Clink rel=\"stylesheet\" href=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fmalihu-custom-scrollbar-plugin\u002F3.1.5\u002Fjquery.mCustomScrollbar.min.css\" integrity=\"sha256-JHGEmB629pipTkMag9aMaw32I8zle24p3FpsEeI6oZU=\" crossorigin=\"anonymous\"\u003E\u003Clink rel=\"stylesheet\" href=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fjqueryui\u002F1.12.1\u002Fjquery-ui.min.css\" integrity=\"sha256-rByPlHULObEjJ6XQxW\u002FflG2r+22R5dKiAoef+aXWfik=\" crossorigin=\"anonymous\"\u003E\u003Clink rel=\"stylesheet\" href=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fbootstrap-select@1.13.17\u002Fdist\u002Fcss\u002Fbootstrap-select.min.css\" integrity=\"sha256-VMPhaMmJn7coDSbzwqB0jflvb+CDnoAlfStC5RogOQo=\" crossorigin=\"anonymous\"\u003E" + (null == (pug_interp = (__webpack_require__(7520).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(4161).call)(this, locals)) ? "" : pug_interp) + "\u003Cscript\u003Ewindow.metadata = JSON.parse( " + (null == (pug_interp = JSON.stringify(metadata).replace(/<\//g, '<\\/')) ? "" : pug_interp) + " );\nwindow.name = \"" + (null == (pug_interp = pageName.replace(/<\//g, '<\\/')) ? "" : pug_interp) + "\";\nwindow.lang = \"" + (null == (pug_interp = lang.replace(/<\//g, '<\\/')) ? "" : pug_interp) + "\";\nwindow.dictionary = JSON.parse( " + (null == (pug_interp = JSON.stringify(dictionary).replace(/<\//g, '<\\/')) ? "" : pug_interp) + " );\n\u003C\u002Fscript\u003E" + (null == (pug_interp = (__webpack_require__(8328).call)(this, locals)) ? "" : pug_interp) + "\u003Cscript\u003Ewindow.entityFeature = JSON.parse( " + (null == (pug_interp = JSON.stringify(entityData).replace(/<\//g, '<\\/')) ? "" : pug_interp) + " );\nwindow.entityName = \"" + (null == (pug_interp = entityName) ? "" : pug_interp) + "\";\nwindow.databaseName = \"" + (null == (pug_interp = databaseName) ? "" : pug_interp) + "\";\nwindow.entityId = \"" + (null == (pug_interp = entityId) ? "" : pug_interp) + "\";\nwindow.entityType = \"" + (null == (pug_interp = entityType) ? "" : pug_interp) + "\";\nwindow.databaseId = \"" + (null == (pug_interp = databaseId) ? "" : pug_interp) + "\";\nwindow.entityDbName = \"" + (null == (pug_interp = entityDbName) ? "" : pug_interp) + "\";\n\n\n\u003C\u002Fscript\u003E\u003Ctitle\u003EHuman Archeogenomics\u003C\u002Ftitle\u003E\u003C\u002Fhead\u003E\u003Cbody class=\"loading\"\u003E";
pug_mixins["nav-item"] = pug_interp = function(lang, ref, name){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (ref === pageName) {
pug_html = pug_html + "\u003Cli" + (pug.attrs(pug.merge([{"class": "nav-item active"},attributes]), true)) + "\u003E\u003Ca" + (" class=\"nav-link\""+pug.attr("href", "/" + lang + "/" + ref, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = name) ? "" : pug_interp)) + "\u003Cspan class=\"sr-only\"\u003E(current)\u003C\u002Fspan\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E";
}
else {
pug_html = pug_html + "\u003Cli" + (pug.attrs(pug.merge([{"class": "nav-item"},attributes]), true)) + "\u003E\u003Ca" + (" class=\"nav-link\""+pug.attr("href", "/" + lang + "/" + ref, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = name) ? "" : pug_interp)) + "\u003C\u002Fa\u003E\u003C\u002Fli\u003E";
}
};
pug_mixins["nav-dropdown-item"] = pug_interp = function(lang, ref, name){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (ref === pageName) {
pug_html = pug_html + "\u003Ca" + (" class=\"dropdown-item\""+pug.attr("href", "/" + lang + "/" + ref, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = name) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
else {
pug_html = pug_html + "\u003Ca" + (" class=\"dropdown-item\""+pug.attr("href", "/" + lang + "/" + ref, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = name) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
};
pug_html = pug_html + "\u003Cnav class=\"navbar navbar-expand-md navbar-dark bg-dark fixed-top px-3\"\u003E\u003Ca" + (" class=\"navbar-brand\""+pug.attr("href", `/${lang}/home`, true, true)) + "\u003EArcheogenomics.eu&nbsp;&nbsp;|&nbsp;&nbsp;Human AGEs\u003C\u002Fa\u003E\u003Cbutton class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbar-wrapper\" aria-controls=\"#navbar-wrapper\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"\u003E\u003Cspan class=\"navbar-toggler-icon\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003Cdiv class=\"collapse navbar-collapse\" id=\"navbar-wrapper\"\u003E\u003Cul class=\"navbar-nav mr-auto\"\u003E";
pug_mixins["nav-item"].call({
attributes: {"class": "mx-2"}
}, lang, `home`, "Main page");
pug_html = pug_html + "\u003Cli class=\"nav-item dropdown\"\u003E\u003Cdiv class=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\u003EApplications\u003C\u002Fdiv\u003E\u003Cdiv class=\"dropdown-menu bg-dark\" aria-labelledby=\"navbar-browse\"\u003E";
pug_mixins["nav-dropdown-item"](lang, `map`, "Interactive map");
pug_mixins["nav-dropdown-item"](lang, `plot`, "Interactive plot");
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fli\u003E\u003Cli class=\"nav-item dropdown\"\u003E\u003Cdiv class=\"nav-link dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\u003EHelp\u003C\u002Fdiv\u003E\u003Cdiv class=\"dropdown-menu bg-dark\" aria-labelledby=\"navbar-browse\"\u003E";
pug_mixins["nav-dropdown-item"](lang, "examples", "Examples");
pug_mixins["nav-dropdown-item"](lang, "faq", "FAQ");
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fli\u003E";
pug_mixins["nav-item"].call({
attributes: {"class": "mx-2"}
}, lang, `contact`, "Contact");
pug_html = pug_html + "\u003C\u002Ful\u003E\u003Cul class=\"navbar-nav ml-auto\"\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fnav\u003E\u003Cdiv id=\"loading-page-wrapper\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv id=\"site-wrapper\"\u003E\u003Cmain role=\"main\"\u003E";
pug_mixins["toggle-arrow"] = pug_interp = function(direction, thickness = 0.1, length = 0.75, positionFix = 1.05){
var block = (this && this.block), attributes = (this && this.attributes) || {};
var top = (Math.sqrt(2) * (thickness - length) / 2.0) * positionFix; 
var styleTop = `top: ${top/2}em; width: ${length}em; height: ${thickness}em`;
var styleBottom = `top: ${-top/2}em; width: ${length}em; height: ${thickness}em`;
pug_html = pug_html + "\u003Cspan" + (pug.attrs(pug.merge([{"class": pug.classes(["toggle-arrow",direction], [false,true])},attributes]), true)) + "\u003E\u003Cspan" + (" class=\"tip\""+pug.attr("style", pug.style(styleTop), true, true)) + "\u003E\u003C\u002Fspan\u003E\u003Cspan" + (" class=\"tip\""+pug.attr("style", pug.style(styleBottom), true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
};
pug_mixins["icon-checkbox"] = pug_interp = function(id, checkboxClass, label = '', isToggled = true, iconTitle=""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper\"\u003E";
if (isToggled) {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox","active",checkboxClass], [false,false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "true","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox",checkboxClass], [false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "false","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
};
pug_mixins["accordion-header"] = pug_interp = function(targetId, title, isCollapsed = false){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (isCollapsed == true) {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": "accordion-header collapsable collapsed","role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": false},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'top';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.2, 0.75);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": "accordion-header collapsable","role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": true},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'bottom';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.2, 0.75);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
};
pug_mixins["accordion-header-button"] = pug_interp = function(targetId, title, iconId, iconClass, isCollapsed = false, isButtonPressed = true, iconTitle="", classes = ""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"accordion-wrapper group\" role=\"group\"\u003E";
pug_mixins["icon-checkbox"].call({
attributes: pug.merge([{"class": "m-0 p-0"},attributes])
}, iconId, iconClass, '', isButtonPressed, iconTitle = iconTitle);
if (isCollapsed == true) {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": pug.classes(["button-accordion-header","accordion-header","collapsable","collapsed",classes], [false,false,false,false,true]),"role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": false},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'top';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.125, 0.65);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": pug.classes(["accordion-header","collapsable",classes], [false,false,true]),"role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": true},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'bottom';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.125, 0.65);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
};








































pug_mixins["icon-checkbox"] = pug_interp = function(id, checkboxClass, label = '', isToggled = true, iconTitle=""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper\"\u003E";
if (isToggled) {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox","active",checkboxClass], [false,false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "true","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox",checkboxClass], [false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "false","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
};
pug_mixins["custom-button"] = pug_interp = function(text, iconName = null, count = null, addSpinner = false, spinnerText = ''){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E&nbsp;";
if (count !== null) {
pug_html = pug_html + "\u003Cspan class=\"items-count\"\u003E" + (pug.escape(null == (pug_interp = count) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["custom-button-link"] = pug_interp = function(link, text, iconName = null, newPage=false){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E";
if (newPage) {
pug_html = pug_html + "\u003Ca" + (" class=\"label\""+pug.attr("href", link, true, true)+" target=\"_blank\"") + "\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
else {
pug_html = pug_html + "\u003Ca" + (" class=\"label\""+pug.attr("href", link, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["custom-button-image"] = pug_interp = function(link, addSpinner = false, spinnerText = ''){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E\u003Cimg" + (pug.attr("src", link, true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["dropdown-element"] = pug_interp = function(elId, val){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (val.constructor === Object) {
if (val.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (val.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (val.isSubmenu) {
pug_html = pug_html + "\u003Cdiv class=\"dropright dropdown-item\"\u003E\u003Cdiv class=\"dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv" + (" class=\"dropdown-menu\""+pug.attr("id", elId, true, true)+" aria-labelledby=\"dropdown-submenu\"") + "\u003E";
// iterate val.options
;(function(){
  var $$obj = val.options;
  if ('number' == typeof $$obj.length) {
      for (var subKey = 0, $$l = $$obj.length; subKey < $$l; subKey++) {
        var subVal = $$obj[subKey];
if (subVal.constructor === Object) {
if (subVal.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (subVal.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (subVal.isToggle) {
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper dropdown-item-toggle\"\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["form-check-input","btn","icon-checkbox",`${subVal.class}`], [false,false,false,true]), false, true)+pug.attr("id", subKey, true, true)+" data-toggle=\"button\""+pug.attr("aria-pressed", toString(subVal.isActive), true, true)+" autocomplete=\"off\" title=\"\""+pug.attr("toggle-target", subVal["toggle-target"], true, true)+pug.attr("option-name", subVal["option-name"], true, true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E\u003Clabel" + (pug.attr("class", pug.classes(["form-check-label",subVal.class], [false,true]), false, true)+pug.attr("for", subKey, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",subVal.class], [false,true]), false, true)+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
      }
  } else {
    var $$l = 0;
    for (var subKey in $$obj) {
      $$l++;
      var subVal = $$obj[subKey];
if (subVal.constructor === Object) {
if (subVal.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (subVal.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (subVal.isToggle) {
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper dropdown-item-toggle\"\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["form-check-input","btn","icon-checkbox",`${subVal.class}`], [false,false,false,true]), false, true)+pug.attr("id", subKey, true, true)+" data-toggle=\"button\""+pug.attr("aria-pressed", toString(subVal.isActive), true, true)+" autocomplete=\"off\" title=\"\""+pug.attr("toggle-target", subVal["toggle-target"], true, true)+pug.attr("option-name", subVal["option-name"], true, true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E\u003Clabel" + (pug.attr("class", pug.classes(["form-check-label",subVal.class], [false,true]), false, true)+pug.attr("for", subKey, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",subVal.class], [false,true]), false, true)+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",val.class], [false,true]), false, true)+pug.attr("id", elId, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", elId, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
};

















pug_mixins["custom-button-dropleft"] = pug_interp = function(id, options, text = '', iconName = null){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"dropleft\"\u003E\u003Cbutton" + (pug.attrs(pug.merge([{"class": "dropdown-toggle btn custom-button","id": pug.escape(id),"type": "button","data-toggle": "dropdown","aria-haspopup": "true","aria-expanded": "false"},attributes]), true)) + "\u003E\u003Cspan class=\"button-content\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003Cdiv" + (" class=\"dropdown-menu\""+pug.attr("aria-labelledby", id, true, true)) + "\u003E";
// iterate options
;(function(){
  var $$obj = options;
  if ('number' == typeof $$obj.length) {
      for (var key = 0, $$l = $$obj.length; key < $$l; key++) {
        var val = $$obj[key];
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", key, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
      }
  } else {
    var $$l = 0;
    for (var key in $$obj) {
      $$l++;
      var val = $$obj[key];
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", key, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
};
pug_mixins["selectOption"] = pug_interp = function(el, key){
var block = (this && this.block), attributes = (this && this.attributes) || {};
var optionsAttributes = {};
if(el.datatokens) optionsAttributes['data-tokens'] = el.datatokens;
if(el.disabled) optionsAttributes['disabled'] = el.disabled;
if(el.subtext) optionsAttributes['data-subtext'] = el.subtext;
if(el.selected) optionsAttributes['selected'] = el.selected;
if(el.content) optionsAttributes['data-content'] = el.content;
if(el.title) optionsAttributes['title'] = el.title;
if(el.attributes)
	Object.keys(el.attributes).forEach((attribute) => {
		optionsAttributes[attribute] = el.attributes[attribute];
	});

pug_html = pug_html + "\u003Coption" + (pug.attrs(pug.merge([{"value": pug.escape(key)},optionsAttributes]), true)) + "\u003E" + (pug.escape(null == (pug_interp = el.name) ? "" : pug_interp)) + "\u003C\u002Foption\u003E";
};












































pug_mixins["dropdown"] = pug_interp = function(name, elements = {}, header = null, placeholder = 'Nothing selected...'){
var block = (this && this.block), attributes = (this && this.attributes) || {};
var headerText = header || '';
var placeholderText = header || placeholder;

pug_html = pug_html + "\u003Cselect" + (pug.attrs(pug.merge([{"class": "selectpicker","data-none-selected-text": pug.escape(headerText),"id": pug.escape(name),"name": pug.escape(name),"data-icon-base": "Material Icons","virtual-scroll": 80,"data-dropup-auto": "true","data-header": pug.escape(placeholderText)},attributes]), true)) + "\u003E";
// iterate elements
;(function(){
  var $$obj = elements;
  if ('number' == typeof $$obj.length) {
      for (var key = 0, $$l = $$obj.length; key < $$l; key++) {
        var el = $$obj[key];
if (el.isOptgroup) {
var groupAttributes = {};
if(el.maxData) groupAttributes['data-max-options'] = el.maxData;

pug_html = pug_html + "\u003Coptgroup" + (pug.attrs(pug.merge([{"label": pug.escape(el.name)},groupAttributes]), true)) + "\u003E";
// iterate el.options
;(function(){
  var $$obj = el.options;
  if ('number' == typeof $$obj.length) {
      for (var key2 = 0, $$l = $$obj.length; key2 < $$l; key2++) {
        var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
      }
  } else {
    var $$l = 0;
    for (var key2 in $$obj) {
      $$l++;
      var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Foptgroup\u003E";
}
else {
pug_mixins["selectOption"](el, key);
}
      }
  } else {
    var $$l = 0;
    for (var key in $$obj) {
      $$l++;
      var el = $$obj[key];
if (el.isOptgroup) {
var groupAttributes = {};
if(el.maxData) groupAttributes['data-max-options'] = el.maxData;

pug_html = pug_html + "\u003Coptgroup" + (pug.attrs(pug.merge([{"label": pug.escape(el.name)},groupAttributes]), true)) + "\u003E";
// iterate el.options
;(function(){
  var $$obj = el.options;
  if ('number' == typeof $$obj.length) {
      for (var key2 = 0, $$l = $$obj.length; key2 < $$l; key2++) {
        var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
      }
  } else {
    var $$l = 0;
    for (var key2 in $$obj) {
      $$l++;
      var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Foptgroup\u003E";
}
else {
pug_mixins["selectOption"](el, key);
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fselect\u003E";
};
var remains = JSON.parse(entityData);
if (entityType == 'remains') {
pug_mixins["results-accordion"] = pug_interp = function(resultsId, title, isCollapsed = true){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": "object-container results-wrapper","id": pug.escape(`${resultsId}-wrapper`)},attributes]), true)) + "\u003E";
pug_mixins["accordion-header"].call({
attributes: {"class": "handle accordion-subsection-header collapsed"}
}, `${resultsId}-accordion`, title, isCollapsed = true);
pug_html = pug_html + "\u003Cdiv" + (" class=\"collapse\""+pug.attr("id", `${resultsId}-accordion`, true, true)) + "\u003E\u003Cdiv class=\"sidebar-setting object-content palette-bg-color-light-bg\"\u003E\u003Cdiv class=\"loading-results-wrapper my-5 loading\"\u003E\u003Cdiv class=\"loading-content d-flex align-items-center justify-content-center\" style=\"z-index: 2; font-size: 1.5rem;\"\u003E\u003Cspan\u003ELoading results...\u003C\u002Fspan\u003E\u003Cdiv class=\"ml-4 spinner-grow\" role=\"status\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
};
pug_html = pug_html + (null == (pug_interp = (__webpack_require__(6222).call)(this, locals)) ? "" : pug_interp);
var mapOptions = {
	'light-basemap': "Show Light basemap",
	'imagery-basemap': "Show Imagery basemap",
	'osm-basemap': "Show OSM basemap"
}


pug_html = pug_html + "\u003Cdiv id=\"map-wrapper\"\u003E\u003Cdiv class=\"map\" id=\"map\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info start-0 top-0\" id=\"header-suplementary-information\"\u003E\u003Cdiv class=\"light-parameter-box d-block\"\u003Earcheological site\u003C\u002Fdiv\u003E\u003Cdiv class=\"darken-parameter-box\"\u003E" + (pug.escape(null == (pug_interp = remains.site.name) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info end-0 top-0\"\u003E";
pug_mixins["custom-button-dropleft"].call({
attributes: {"class": "palette-tertiary-light no-focus position-relative no-text","style": "z-index:10;"}
}, 'map-options-menu', mapOptions, text = 'Basemap', iconName = 'map', buttonTitle="Show base map options");
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info end-0 bottom-0\"\u003E\u003Cdiv class=\"light-parameter-box d-block\"\u003E \u003Cspan class=\"d-inline-block\"\u003Ecoordinates\u003C\u002Fspan\u003E\u003Ci class=\"d-inline-block float-right material-icons option-button\" id=\"coordinates-restore\"\u003Esettings_backup_restore\u003C\u002Fi\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"darken-parameter-box coordinates-wrapper\"\u003E\u003Cspan id=\"map-latitude\"\u003E" + (pug.escape(null == (pug_interp = remains.coordinates.latitude) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan id=\"map-longitude\"\u003E" + (pug.escape(null == (pug_interp = remains.coordinates.longitude) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info start-0 bottom-0\" id=\"header-main-information\"\u003E\u003Cdiv class=\"light-parameter-box\"\u003ERemains\u003C\u002Fdiv\u003E\u003Cdiv class=\"darken-parameter-box\"\u003E" + (pug.escape(null == (pug_interp = remains.id) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv id=\"content-wrapper\"\u003E\u003Cdiv id=\"content\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003ESample information\u003C\u002Fh2\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col-3\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"content information-wrapper\"\u003E\u003Ch3 class=\"section-title\"\u003EGeneral\u003C\u002Fh3\u003E\u003Cdiv class=\"section-content\"\u003E\u003Ctable class=\"table\"\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EEntity\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = entityName || '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EDatabase ID\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.database_id || '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EData source\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = databaseName || '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EData source ID\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.full_sample.id ? remains.full_sample.id : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003ESample origin\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.full_sample.origin ? remains.full_sample.origin : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"col-3\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"content information-wrapper\"\u003E\u003Ch3 class=\"section-title\"\u003ELocation\u003C\u002Fh3\u003E\u003Cdiv class=\"section-content\"\u003E\u003Ctable class=\"table\"\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003ESite\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.site.name ? remains.site.name : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003ERegions\u003C\u002Ftd\u003E\u003Ctd id=\"regions-select-wrapper\"\u003E";
pug_mixins["dropdown"].call({
attributes: {"multiple": pug.escape(true),"data-max-options": "1","data-style": "btn-gray"}
}, 'regions-select', regionsDic, 'Choose region to show');
pug_html = pug_html + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr class=\"hidden\" id=\"region-wrapper\"\u003E\u003Ctd class=\"prop-name\"\u003ERegion name\u003C\u002Ftd\u003E\u003Ctd id=\"region-name\"\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003Cdiv class=\"hidden\" id=\"other-regions-wrapper\"\u003E\u003Cp\u003EOther regions in which the object is located:\u003C\u002Fp\u003E\u003Cul id=\"regions-list\"\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"col-3\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"content information-wrapper\"\u003E\u003Ch3 class=\"section-title\"\u003EArcheological\u003C\u002Fh3\u003E\u003Cdiv class=\"section-content\"\u003E\u003Ctable class=\"table\"\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EDating\u003C\u002Ftd\u003E";
var year_start = remains.dating && remains.dating.year_start ? remains.dating.year_start : '-'
var year_end = remains.dating && remains.dating.year_end ? remains.dating.year_end : '-'
pug_html = pug_html + "\u003Ctd\u003E\u003Cspan class=\"years-text\"\u003E" + (pug.escape(null == (pug_interp = year_start) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E&nbsp;&nbsp;&#8212;&nbsp;&nbsp;\u003C\u002Fspan\u003E\u003Cspan class=\"years-text\"\u003E" + (pug.escape(null == (pug_interp = year_end) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EPopulation\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.population ? remains.population : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"col-3\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"content information-wrapper\"\u003E\u003Ch3 class=\"section-title\"\u003EGenomic\u003C\u002Fh3\u003E\u003Cdiv class=\"section-content\"\u003E\u003Ctable class=\"table\"\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EHaplogroup Y\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.haplogroup_y && remains.haplogroup_y.value ? remains.haplogroup_y.value : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EHaplogroup Mt\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.haplogroup_mt && remains.haplogroup_mt.value ? remains.haplogroup_mt.value : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003ESex\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.sex && remains.sex.value ? remains.sex.value : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003EAnalysis information\u003C\u002Fh2\u003E";
pug_mixins["results-accordion"]('admixtures', 'Admixture results');
pug_mixins["results-accordion"]('pca', 'PCA results');
pug_mixins["results-accordion"]('umap', 'UMAP results');
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003ESource information\u003C\u002Fh2\u003E";
// iterate remains.sources
;(function(){
  var $$obj = remains.sources;
  if ('number' == typeof $$obj.length) {
      for (var index = 0, $$l = $$obj.length; index < $$l; index++) {
        var source = $$obj[index];
if (index > 0) {
pug_html = pug_html + "\u003Cdiv class=\"mb-4\"\u003E\u003C\u002Fdiv\u003E";
}
if (source.type_id == 'database') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Estorage\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else
if (source.type_id == 'article') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Einsert_drive_file\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.&nbsp;\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.authors.join(", ") + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Ci\u003E" + (pug.escape(null == (pug_interp = source.publisher) ? "" : pug_interp)) + "\u003C\u002Fi\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = " - " + source.date.year + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.volume_and_issue + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.pages + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
      }
  } else {
    var $$l = 0;
    for (var index in $$obj) {
      $$l++;
      var source = $$obj[index];
if (index > 0) {
pug_html = pug_html + "\u003Cdiv class=\"mb-4\"\u003E\u003C\u002Fdiv\u003E";
}
if (source.type_id == 'database') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Estorage\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else
if (source.type_id == 'article') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Einsert_drive_file\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.&nbsp;\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.authors.join(", ") + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Ci\u003E" + (pug.escape(null == (pug_interp = source.publisher) ? "" : pug_interp)) + "\u003C\u002Fi\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = " - " + source.date.year + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.volume_and_issue + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.pages + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003EDownload \u003C\u002Fh2\u003E\u003Ca" + (pug.attr("href", `/${lang}/download/db/${databaseId}/entity/${entityType}/${entityId}`, true, true)) + "\u003EDownload full sample annotation\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else
if (entityType == 'person') {
pug_mixins["results-accordion"] = pug_interp = function(resultsId, title, isCollapsed = true){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": "object-container results-wrapper","id": pug.escape(`${resultsId}-wrapper`)},attributes]), true)) + "\u003E";
pug_mixins["accordion-header"].call({
attributes: {"class": "handle accordion-subsection-header collapsed"}
}, `${resultsId}-accordion`, title, isCollapsed = true);
pug_html = pug_html + "\u003Cdiv" + (" class=\"collapse\""+pug.attr("id", `${resultsId}-accordion`, true, true)) + "\u003E\u003Cdiv class=\"sidebar-setting object-content palette-bg-color-light-bg\"\u003E\u003Cdiv class=\"loading-results-wrapper my-5 loading\"\u003E\u003Cdiv class=\"loading-content d-flex align-items-center justify-content-center\" style=\"z-index: 2; font-size: 1.5rem;\"\u003E\u003Cspan\u003ELoading results...\u003C\u002Fspan\u003E\u003Cdiv class=\"ml-4 spinner-grow\" role=\"status\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
};
pug_html = pug_html + (null == (pug_interp = (__webpack_require__(6222).call)(this, locals)) ? "" : pug_interp);
var mapOptions = {
	'light-basemap': "Show Light basemap",
	'imagery-basemap': "Show Imagery basemap",
	'osm-basemap': "Show OSM basemap"
}


pug_html = pug_html + "\u003Cdiv id=\"map-wrapper\"\u003E\u003Cdiv class=\"map\" id=\"map\"\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info start-0 top-0\" id=\"header-suplementary-information\"\u003E\u003Cdiv class=\"light-parameter-box d-block\"\u003Eplace\u003C\u002Fdiv\u003E\u003Cdiv class=\"darken-parameter-box\"\u003E" + (pug.escape(null == (pug_interp = remains.place.name || '-') ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info end-0 top-0\"\u003E";
pug_mixins["custom-button-dropleft"].call({
attributes: {"class": "palette-tertiary-light no-focus position-relative no-text","style": "z-index:10;"}
}, 'map-options-menu', mapOptions, text = 'Basemap', iconName = 'map', buttonTitle="Show base map options");
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info end-0 bottom-0\"\u003E\u003Cdiv class=\"light-parameter-box d-block\"\u003E \u003Cspan class=\"d-inline-block\"\u003Ecoordinates\u003C\u002Fspan\u003E\u003Ci class=\"d-inline-block float-right material-icons option-button\" id=\"coordinates-restore\"\u003Esettings_backup_restore\u003C\u002Fi\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"darken-parameter-box coordinates-wrapper\"\u003E\u003Cspan id=\"map-latitude\"\u003E" + (pug.escape(null == (pug_interp = remains.coordinates.latitude) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan id=\"map-longitude\"\u003E" + (pug.escape(null == (pug_interp = remains.coordinates.longitude) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"map-info start-0 bottom-0\" id=\"header-main-information\"\u003E\u003Cdiv class=\"light-parameter-box\"\u003EPerson\u003C\u002Fdiv\u003E\u003Cdiv class=\"darken-parameter-box\"\u003E" + (pug.escape(null == (pug_interp = remains.id) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv id=\"content-wrapper\"\u003E\u003Cdiv id=\"content\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003ESample information\u003C\u002Fh2\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col-3\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"content information-wrapper\"\u003E\u003Ch3 class=\"section-title\"\u003EGeneral\u003C\u002Fh3\u003E\u003Cdiv class=\"section-content\"\u003E\u003Ctable class=\"table\"\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EEntity\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = entityName || '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EDatabase ID\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.database_id || '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EData source\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = databaseName || '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EData source ID\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.full_sample.id ? remains.full_sample.id : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EPopulation\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.population ? remains.population : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"col-3\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"content information-wrapper\"\u003E\u003Ch3 class=\"section-title\"\u003ELocation\u003C\u002Fh3\u003E\u003Cdiv class=\"section-content\"\u003E\u003Ctable class=\"table\"\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EPlace\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.place.name ? remains.place.name : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003ERegions\u003C\u002Ftd\u003E\u003Ctd id=\"regions-select-wrapper\"\u003E";
delete regionsDic['cultures']
pug_mixins["dropdown"].call({
attributes: {"multiple": pug.escape(true),"data-max-options": "1","data-style": "btn-gray"}
}, 'regions-select', regionsDic, 'Choose region to show');
pug_html = pug_html + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003Ctr class=\"hidden\" id=\"region-wrapper\"\u003E\u003Ctd class=\"prop-name\"\u003ERegion name\u003C\u002Ftd\u003E\u003Ctd id=\"region-name\"\u003E\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003Cdiv class=\"hidden\" id=\"other-regions-wrapper\"\u003E\u003Cp\u003EOther regions in which the object is located:\u003C\u002Fp\u003E\u003Cul id=\"regions-list\"\u003E\u003C\u002Ful\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"col-3\"\u003E\u003Cdiv class=\"row\"\u003E\u003Cdiv class=\"content information-wrapper\"\u003E\u003Ch3 class=\"section-title\"\u003EGenomic\u003C\u002Fh3\u003E\u003Cdiv class=\"section-content\"\u003E\u003Ctable class=\"table\"\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EHaplogroup Y\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.haplogroup_y && remains.haplogroup_y.value ? remains.haplogroup_y.value : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003EHaplogroup Mt\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.haplogroup_mt && remains.haplogroup_mt.value ? remains.haplogroup_mt.value : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003Ctbody\u003E\u003Ctr\u003E\u003Ctd class=\"prop-name\"\u003ESex\u003C\u002Ftd\u003E\u003Ctd\u003E" + (pug.escape(null == (pug_interp = remains.sex && remains.sex.value ? remains.sex.value : '-') ? "" : pug_interp)) + "\u003C\u002Ftd\u003E\u003C\u002Ftr\u003E\u003C\u002Ftbody\u003E\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003EAnalysis information\u003C\u002Fh2\u003E";
pug_mixins["results-accordion"]('admixtures', 'Admixture results');
pug_mixins["results-accordion"]('pca', 'PCA results');
pug_mixins["results-accordion"]('umap', 'UMAP results');
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003ESource information\u003C\u002Fh2\u003E";
// iterate remains.sources
;(function(){
  var $$obj = remains.sources;
  if ('number' == typeof $$obj.length) {
      for (var index = 0, $$l = $$obj.length; index < $$l; index++) {
        var source = $$obj[index];
if (index > 0) {
pug_html = pug_html + "\u003Cdiv class=\"mb-4\"\u003E\u003C\u002Fdiv\u003E";
}
if (source.type_id == 'database') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Estorage\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else
if (source.type_id == 'article') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Einsert_drive_file\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.&nbsp;\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.authors.join(", ") + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Ci\u003E" + (pug.escape(null == (pug_interp = source.publisher) ? "" : pug_interp)) + "\u003C\u002Fi\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = " - " + source.date.year + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.volume_and_issue + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.pages + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
      }
  } else {
    var $$l = 0;
    for (var index in $$obj) {
      $$l++;
      var source = $$obj[index];
if (index > 0) {
pug_html = pug_html + "\u003Cdiv class=\"mb-4\"\u003E\u003C\u002Fdiv\u003E";
}
if (source.type_id == 'database') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Estorage\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else
if (source.type_id == 'article') {
pug_html = pug_html + "\u003Cdiv" + (" class=\"source p-3\""+pug.attr("source-id", index, true, true)) + "\u003E\u003Ci class=\"material-icons mr-3\"\u003Einsert_drive_file\u003C\u002Fi\u003E\u003Ca" + (pug.attr("href", source.hyperlink, true, true)) + "\u003E\u003Cb class=\"palette-primary-color\"\u003E" + (pug.escape(null == (pug_interp = source.name) ? "" : pug_interp)) + "\u003C\u002Fb\u003E\u003C\u002Fa\u003E.&nbsp;\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.authors.join(", ") + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Ci\u003E" + (pug.escape(null == (pug_interp = source.publisher) ? "" : pug_interp)) + "\u003C\u002Fi\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = " - " + source.date.year + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.volume_and_issue + ", ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan\u003E" + (pug.escape(null == (pug_interp = source.pages + ". ") ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cdiv class=\"text-right mt-2\"\u003E";
pug_mixins["custom-button-image"].call({
attributes: {"class": "bibtex-button palette-tertiary-light outline no-focus mr-2 mb-0"}
}, '/img/icons/bibtex.png');
pug_mixins["custom-button-link"].call({
attributes: {"class": "palette-tertiary-light outline no-focus mb-0"}
}, source.hyperlink, '</Link>', null);
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"row my-5\"\u003E\u003Cdiv class=\"col\"\u003E\u003Ch2 class=\"section-title subsection-header\"\u003EDownload \u003C\u002Fh2\u003E\u003Ca" + (pug.attr("href", `/${lang}/download/db/${databaseId}/entity/${entityType}/${entityId}`, true, true)) + "\u003EDownload full sample annotation\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + ("\u003C\u002Fmain\u003E\u003C\u002Fdiv\u003E" + (null == (pug_interp = (__webpack_require__(539).call)(this, locals)) ? "" : pug_interp));
pug_mixins["toggle-arrow"] = pug_interp = function(direction, thickness = 0.1, length = 0.75, positionFix = 1.05){
var block = (this && this.block), attributes = (this && this.attributes) || {};
var top = (Math.sqrt(2) * (thickness - length) / 2.0) * positionFix; 
var styleTop = `top: ${top/2}em; width: ${length}em; height: ${thickness}em`;
var styleBottom = `top: ${-top/2}em; width: ${length}em; height: ${thickness}em`;
pug_html = pug_html + "\u003Cspan" + (pug.attrs(pug.merge([{"class": pug.classes(["toggle-arrow",direction], [false,true])},attributes]), true)) + "\u003E\u003Cspan" + (" class=\"tip\""+pug.attr("style", pug.style(styleTop), true, true)) + "\u003E\u003C\u002Fspan\u003E\u003Cspan" + (" class=\"tip\""+pug.attr("style", pug.style(styleBottom), true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
};
pug_mixins["icon-checkbox"] = pug_interp = function(id, checkboxClass, label = '', isToggled = true, iconTitle=""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper\"\u003E";
if (isToggled) {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox","active",checkboxClass], [false,false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "true","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox",checkboxClass], [false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "false","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
};
pug_mixins["accordion-header"] = pug_interp = function(targetId, title, isCollapsed = false){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (isCollapsed == true) {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": "accordion-header collapsable collapsed","role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": false},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'top';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.2, 0.75);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": "accordion-header collapsable","role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": true},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'bottom';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.2, 0.75);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
};
pug_mixins["accordion-header-button"] = pug_interp = function(targetId, title, iconId, iconClass, isCollapsed = false, isButtonPressed = true, iconTitle="", classes = ""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"accordion-wrapper group\" role=\"group\"\u003E";
pug_mixins["icon-checkbox"].call({
attributes: pug.merge([{"class": "m-0 p-0"},attributes])
}, iconId, iconClass, '', isButtonPressed, iconTitle = iconTitle);
if (isCollapsed == true) {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": pug.classes(["button-accordion-header","accordion-header","collapsable","collapsed",classes], [false,false,false,false,true]),"role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": false},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'top';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.125, 0.65);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": pug.classes(["accordion-header","collapsable",classes], [false,false,true]),"role": "button","data-toggle": "collapse","data-target": pug.escape("#"+targetId),"aria-expanded": true},attributes]), true)) + "\u003E\u003Ch4 class=\"header-text\"\u003E" + (pug.escape(null == (pug_interp = title) ? "" : pug_interp)) + "\u003C\u002Fh4\u003E";
var direction = 'bottom';
pug_mixins["toggle-arrow"].call({
attributes: {"class": "accordion-arrow"}
}, direction, 0.125, 0.65);
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
};








































pug_mixins["selectOption"] = pug_interp = function(el, key){
var block = (this && this.block), attributes = (this && this.attributes) || {};
var optionsAttributes = {};
if(el.datatokens) optionsAttributes['data-tokens'] = el.datatokens;
if(el.disabled) optionsAttributes['disabled'] = el.disabled;
if(el.subtext) optionsAttributes['data-subtext'] = el.subtext;
if(el.selected) optionsAttributes['selected'] = el.selected;
if(el.content) optionsAttributes['data-content'] = el.content;
if(el.title) optionsAttributes['title'] = el.title;
if(el.attributes)
	Object.keys(el.attributes).forEach((attribute) => {
		optionsAttributes[attribute] = el.attributes[attribute];
	});

pug_html = pug_html + "\u003Coption" + (pug.attrs(pug.merge([{"value": pug.escape(key)},optionsAttributes]), true)) + "\u003E" + (pug.escape(null == (pug_interp = el.name) ? "" : pug_interp)) + "\u003C\u002Foption\u003E";
};












































pug_mixins["dropdown"] = pug_interp = function(name, elements = {}, header = null, placeholder = 'Nothing selected...'){
var block = (this && this.block), attributes = (this && this.attributes) || {};
var headerText = header || '';
var placeholderText = header || placeholder;

pug_html = pug_html + "\u003Cselect" + (pug.attrs(pug.merge([{"class": "selectpicker","data-none-selected-text": pug.escape(headerText),"id": pug.escape(name),"name": pug.escape(name),"data-icon-base": "Material Icons","virtual-scroll": 80,"data-dropup-auto": "true","data-header": pug.escape(placeholderText)},attributes]), true)) + "\u003E";
// iterate elements
;(function(){
  var $$obj = elements;
  if ('number' == typeof $$obj.length) {
      for (var key = 0, $$l = $$obj.length; key < $$l; key++) {
        var el = $$obj[key];
if (el.isOptgroup) {
var groupAttributes = {};
if(el.maxData) groupAttributes['data-max-options'] = el.maxData;

pug_html = pug_html + "\u003Coptgroup" + (pug.attrs(pug.merge([{"label": pug.escape(el.name)},groupAttributes]), true)) + "\u003E";
// iterate el.options
;(function(){
  var $$obj = el.options;
  if ('number' == typeof $$obj.length) {
      for (var key2 = 0, $$l = $$obj.length; key2 < $$l; key2++) {
        var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
      }
  } else {
    var $$l = 0;
    for (var key2 in $$obj) {
      $$l++;
      var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Foptgroup\u003E";
}
else {
pug_mixins["selectOption"](el, key);
}
      }
  } else {
    var $$l = 0;
    for (var key in $$obj) {
      $$l++;
      var el = $$obj[key];
if (el.isOptgroup) {
var groupAttributes = {};
if(el.maxData) groupAttributes['data-max-options'] = el.maxData;

pug_html = pug_html + "\u003Coptgroup" + (pug.attrs(pug.merge([{"label": pug.escape(el.name)},groupAttributes]), true)) + "\u003E";
// iterate el.options
;(function(){
  var $$obj = el.options;
  if ('number' == typeof $$obj.length) {
      for (var key2 = 0, $$l = $$obj.length; key2 < $$l; key2++) {
        var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
      }
  } else {
    var $$l = 0;
    for (var key2 in $$obj) {
      $$l++;
      var el2 = $$obj[key2];
pug_mixins["selectOption"](el2, key2);
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Foptgroup\u003E";
}
else {
pug_mixins["selectOption"](el, key);
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fselect\u003E";
};
pug_mixins["icon-checkbox"] = pug_interp = function(id, checkboxClass, label = '', isToggled = true, iconTitle=""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper\"\u003E";
if (isToggled) {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox","active",checkboxClass], [false,false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "true","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox",checkboxClass], [false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "false","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
};
pug_mixins["custom-button"] = pug_interp = function(text, iconName = null, count = null, addSpinner = false, spinnerText = ''){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E&nbsp;";
if (count !== null) {
pug_html = pug_html + "\u003Cspan class=\"items-count\"\u003E" + (pug.escape(null == (pug_interp = count) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["custom-button-link"] = pug_interp = function(link, text, iconName = null, newPage=false){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E";
if (newPage) {
pug_html = pug_html + "\u003Ca" + (" class=\"label\""+pug.attr("href", link, true, true)+" target=\"_blank\"") + "\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
else {
pug_html = pug_html + "\u003Ca" + (" class=\"label\""+pug.attr("href", link, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["custom-button-image"] = pug_interp = function(link, addSpinner = false, spinnerText = ''){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E\u003Cimg" + (pug.attr("src", link, true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["dropdown-element"] = pug_interp = function(elId, val){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (val.constructor === Object) {
if (val.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (val.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (val.isSubmenu) {
pug_html = pug_html + "\u003Cdiv class=\"dropright dropdown-item\"\u003E\u003Cdiv class=\"dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv" + (" class=\"dropdown-menu\""+pug.attr("id", elId, true, true)+" aria-labelledby=\"dropdown-submenu\"") + "\u003E";
// iterate val.options
;(function(){
  var $$obj = val.options;
  if ('number' == typeof $$obj.length) {
      for (var subKey = 0, $$l = $$obj.length; subKey < $$l; subKey++) {
        var subVal = $$obj[subKey];
if (subVal.constructor === Object) {
if (subVal.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (subVal.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (subVal.isToggle) {
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper dropdown-item-toggle\"\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["form-check-input","btn","icon-checkbox",`${subVal.class}`], [false,false,false,true]), false, true)+pug.attr("id", subKey, true, true)+" data-toggle=\"button\""+pug.attr("aria-pressed", toString(subVal.isActive), true, true)+" autocomplete=\"off\" title=\"\""+pug.attr("toggle-target", subVal["toggle-target"], true, true)+pug.attr("option-name", subVal["option-name"], true, true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E\u003Clabel" + (pug.attr("class", pug.classes(["form-check-label",subVal.class], [false,true]), false, true)+pug.attr("for", subKey, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",subVal.class], [false,true]), false, true)+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
      }
  } else {
    var $$l = 0;
    for (var subKey in $$obj) {
      $$l++;
      var subVal = $$obj[subKey];
if (subVal.constructor === Object) {
if (subVal.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (subVal.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (subVal.isToggle) {
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper dropdown-item-toggle\"\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["form-check-input","btn","icon-checkbox",`${subVal.class}`], [false,false,false,true]), false, true)+pug.attr("id", subKey, true, true)+" data-toggle=\"button\""+pug.attr("aria-pressed", toString(subVal.isActive), true, true)+" autocomplete=\"off\" title=\"\""+pug.attr("toggle-target", subVal["toggle-target"], true, true)+pug.attr("option-name", subVal["option-name"], true, true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E\u003Clabel" + (pug.attr("class", pug.classes(["form-check-label",subVal.class], [false,true]), false, true)+pug.attr("for", subKey, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",subVal.class], [false,true]), false, true)+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",val.class], [false,true]), false, true)+pug.attr("id", elId, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", elId, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
};

















pug_mixins["custom-button-dropleft"] = pug_interp = function(id, options, text = '', iconName = null){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"dropleft\"\u003E\u003Cbutton" + (pug.attrs(pug.merge([{"class": "dropdown-toggle btn custom-button","id": pug.escape(id),"type": "button","data-toggle": "dropdown","aria-haspopup": "true","aria-expanded": "false"},attributes]), true)) + "\u003E\u003Cspan class=\"button-content\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003Cdiv" + (" class=\"dropdown-menu\""+pug.attr("aria-labelledby", id, true, true)) + "\u003E";
// iterate options
;(function(){
  var $$obj = options;
  if ('number' == typeof $$obj.length) {
      for (var key = 0, $$l = $$obj.length; key < $$l; key++) {
        var val = $$obj[key];
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", key, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
      }
  } else {
    var $$l = 0;
    for (var key in $$obj) {
      $$l++;
      var val = $$obj[key];
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", key, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
};
pug_mixins["icon-textbox"] = pug_interp = function(id, placeholder, iconName, ariaLabel = '', classes = ""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv" + (pug.attrs(pug.merge([{"class": "input-group icon-textbox-wrapper"},attributes]), true)) + "\u003E\u003Cinput" + (pug.attr("class", pug.classes(["form-control",classes], [false,true]), false, true)+pug.attr("id", id, true, true)+" type=\"text\""+pug.attr("aria-label", ariaLabel, true, true)+pug.attr("placeholder", placeholder, true, true)) + "\u003E\u003Cdiv class=\"input-group-append\"\u003E\u003Ci class=\"material-icons icon\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E\u003Cdiv class=\"spinner-border status hidden\" role=\"status\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
};
























pug_mixins["icon-checkbox"] = pug_interp = function(id, checkboxClass, label = '', isToggled = true, iconTitle=""){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper\"\u003E";
if (isToggled) {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox","active",checkboxClass], [false,false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "true","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": pug.classes(["form-check-input","btn","icon-checkbox",checkboxClass], [false,false,false,true]),"id": pug.escape(id),"data-toggle": "button","aria-pressed": "false","autocomplete": "off","title": pug.escape(iconTitle)},attributes]), true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E";
if (label && label != '') {
pug_html = pug_html + "\u003Clabel" + (" class=\"form-check-label\""+pug.attr("for", id, true, true)) + "\u003E" + (null == (pug_interp = label) ? "" : pug_interp) + "\u003C\u002Flabel\u003E";
}
}
pug_html = pug_html + "\u003C\u002Fdiv\u003E";
};
pug_mixins["custom-button"] = pug_interp = function(text, iconName = null, count = null, addSpinner = false, spinnerText = ''){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E&nbsp;";
if (count !== null) {
pug_html = pug_html + "\u003Cspan class=\"items-count\"\u003E" + (pug.escape(null == (pug_interp = count) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
}
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["custom-button-link"] = pug_interp = function(link, text, iconName = null, newPage=false){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E";
if (newPage) {
pug_html = pug_html + "\u003Ca" + (" class=\"label\""+pug.attr("href", link, true, true)+" target=\"_blank\"") + "\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
else {
pug_html = pug_html + "\u003Ca" + (" class=\"label\""+pug.attr("href", link, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fa\u003E";
}
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["custom-button-image"] = pug_interp = function(link, addSpinner = false, spinnerText = ''){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cbutton" + (pug.attrs(pug.merge([{"class": "btn custom-button","type": "button"},attributes]), true)) + "\u003E";
if (addSpinner === true) {
pug_html = pug_html + "\u003Cspan class=\"loading-button-wrapper\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = spinnerText) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E\u003Cspan class=\"spinner-grow\" role=\"status\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E";
}
pug_html = pug_html + "\u003Cspan class=\"button-content\"\u003E\u003Cimg" + (pug.attr("src", link, true, true)) + "\u003E\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E";
};
pug_mixins["dropdown-element"] = pug_interp = function(elId, val){
var block = (this && this.block), attributes = (this && this.attributes) || {};
if (val.constructor === Object) {
if (val.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (val.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (val.isSubmenu) {
pug_html = pug_html + "\u003Cdiv class=\"dropright dropdown-item\"\u003E\u003Cdiv class=\"dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fdiv\u003E\u003Cdiv" + (" class=\"dropdown-menu\""+pug.attr("id", elId, true, true)+" aria-labelledby=\"dropdown-submenu\"") + "\u003E";
// iterate val.options
;(function(){
  var $$obj = val.options;
  if ('number' == typeof $$obj.length) {
      for (var subKey = 0, $$l = $$obj.length; subKey < $$l; subKey++) {
        var subVal = $$obj[subKey];
if (subVal.constructor === Object) {
if (subVal.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (subVal.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (subVal.isToggle) {
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper dropdown-item-toggle\"\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["form-check-input","btn","icon-checkbox",`${subVal.class}`], [false,false,false,true]), false, true)+pug.attr("id", subKey, true, true)+" data-toggle=\"button\""+pug.attr("aria-pressed", toString(subVal.isActive), true, true)+" autocomplete=\"off\" title=\"\""+pug.attr("toggle-target", subVal["toggle-target"], true, true)+pug.attr("option-name", subVal["option-name"], true, true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E\u003Clabel" + (pug.attr("class", pug.classes(["form-check-label",subVal.class], [false,true]), false, true)+pug.attr("for", subKey, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",subVal.class], [false,true]), false, true)+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
      }
  } else {
    var $$l = 0;
    for (var subKey in $$obj) {
      $$l++;
      var subVal = $$obj[subKey];
if (subVal.constructor === Object) {
if (subVal.isHeader) {
pug_html = pug_html + "\u003Ch6 class=\"dropdown-header\"\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fh6\u003E";
}
else
if (subVal.isDivider) {
pug_html = pug_html + "\u003Cdiv class=\"dropdown-divider\"\u003E\u003C\u002Fdiv\u003E";
}
else
if (subVal.isToggle) {
pug_html = pug_html + "\u003Cdiv class=\"icon-checkbox-wrapper dropdown-item-toggle\"\u003E\u003Cbutton" + (pug.attr("class", pug.classes(["form-check-input","btn","icon-checkbox",`${subVal.class}`], [false,false,false,true]), false, true)+pug.attr("id", subKey, true, true)+" data-toggle=\"button\""+pug.attr("aria-pressed", toString(subVal.isActive), true, true)+" autocomplete=\"off\" title=\"\""+pug.attr("toggle-target", subVal["toggle-target"], true, true)+pug.attr("option-name", subVal["option-name"], true, true)) + "\u003E\u003Ci class=\"material-icons\"\u003E\u003C\u002Fi\u003E\u003C\u002Fbutton\u003E\u003Clabel" + (pug.attr("class", pug.classes(["form-check-label",subVal.class], [false,true]), false, true)+pug.attr("for", subKey, true, true)) + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",subVal.class], [false,true]), false, true)+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", subKey, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = subVal) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
}
else {
pug_html = pug_html + "\u003Cbutton" + (pug.attr("class", pug.classes(["dropdown-item",val.class], [false,true]), false, true)+pug.attr("id", elId, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val.name) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
}
else {
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", elId, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
}
};

















pug_mixins["custom-button-dropleft"] = pug_interp = function(id, options, text = '', iconName = null){
var block = (this && this.block), attributes = (this && this.attributes) || {};
pug_html = pug_html + "\u003Cdiv class=\"dropleft\"\u003E\u003Cbutton" + (pug.attrs(pug.merge([{"class": "dropdown-toggle btn custom-button","id": pug.escape(id),"type": "button","data-toggle": "dropdown","aria-haspopup": "true","aria-expanded": "false"},attributes]), true)) + "\u003E\u003Cspan class=\"button-content\"\u003E\u003Cspan class=\"label\"\u003E" + (pug.escape(null == (pug_interp = text) ? "" : pug_interp)) + "\u003C\u002Fspan\u003E";
if (iconName !== null) {
pug_html = pug_html + "\u003Ci class=\"material-icons\"\u003E" + (pug.escape(null == (pug_interp = iconName) ? "" : pug_interp)) + "\u003C\u002Fi\u003E";
}
pug_html = pug_html + "\u003C\u002Fspan\u003E\u003C\u002Fbutton\u003E\u003Cdiv" + (" class=\"dropdown-menu\""+pug.attr("aria-labelledby", id, true, true)) + "\u003E";
// iterate options
;(function(){
  var $$obj = options;
  if ('number' == typeof $$obj.length) {
      for (var key = 0, $$l = $$obj.length; key < $$l; key++) {
        var val = $$obj[key];
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", key, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
      }
  } else {
    var $$l = 0;
    for (var key in $$obj) {
      $$l++;
      var val = $$obj[key];
pug_html = pug_html + "\u003Cbutton" + (" class=\"dropdown-item\""+pug.attr("id", key, true, true)+" type=\"button\"") + "\u003E" + (pug.escape(null == (pug_interp = val) ? "" : pug_interp)) + "\u003C\u002Fbutton\u003E";
    }
  }
}).call(this);

pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E";
};
pug_html = pug_html + "\u003Cdiv class=\"hidden dropdown-item attribute-wrapper dropdown-item-toggle\" id=\"column-toggle-dropdown-attribute-template\" attribute-id=\"\"\u003E\u003Cinput class=\"mr-3\" type=\"checkbox\"\u003E\u003Clabel\u003EText\u003C\u002Flabel\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"hidden dropdown dropright\" id=\"column-toggle-dropdown-attribute-type-template\"\u003E\u003Cdiv class=\"dropdown-item dropdown-toggle attribute-type-wrapper\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\u003EText\u003C\u002Fdiv\u003E\u003Cdiv class=\"dropdown-menu\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cli class=\"dataset object-container hidden\" id=\"features-dataset-template\"\u003E";
pug_mixins["accordion-header-button"].call({
attributes: {"class": "handle accordion-subsection-header collapsed"}
}, 'features-dataset-accordion-template', 'Dataset #1', '', '');
pug_html = pug_html + "\u003Cdiv class=\"collapse\" id=\"features-dataset-accordion-template\"\u003E\u003Cdiv class=\"sidebar-setting object-content palette-bg-color-light-bg\"\u003E\u003Cdiv class=\"subsection d-inline-block\"\u003E";
pug_mixins["icon-textbox"]('features-dataset-search', 'Filter by attributes...', 'filter_list', 'samples-filter');
pug_html = pug_html + "\u003C\u002Fdiv\u003E\u003Cdiv class=\"subsection d-inline-block\"\u003E\u003Cdiv class=\"column-toggle-dropdown dropdown mt-3\"\u003E";
pug_mixins["custom-button"].call({
attributes: {"class": "column-toggle-dropdown palette-primary no-focus","type": "button","data-toggle": "dropdown","aria-haspopup": "true","aria-expanded": "false"}
}, "Show columns", "visibility");
pug_html = pug_html + "\u003Cdiv class=\"dropdown-menu\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"subsection samples-section\"\u003E\u003Cdiv class=\"table-wrapper\"\u003E \u003Cdiv class=\"table\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"features-map-modal map-modal loading hidden\" id=\"features-map-modal-template\" title=\"Cluster details\"\u003E\u003Cdiv class=\"map-modal-content p-2 pr-3\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fli\u003E\u003Cdiv class=\"result-chart hidden\" id=\"result-chart-template\"\u003E\u003Cdiv class=\"plot\"\u003E\u003C\u002Fdiv\u003E\u003Cp class=\"label\"\u003E\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003Cdiv class=\"result-scatterplot hidden\" id=\"result-scatterplot-template\"\u003E\u003Cdiv class=\"plot\"\u003E\u003C\u002Fdiv\u003E\u003Cp class=\"label\"\u003E\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003Cscript src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fjquery\u002F3.3.1\u002Fjquery.min.js\" integrity=\"sha256-FgpCb\u002FKJQlLNfOu91ta32o\u002FNMZxltwRo8QtmkMRdAu8=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fjquery-easing\u002F1.4.1\u002Fjquery.easing.min.js\" integrity=\"sha256-H3cjtrm\u002FztDeuhCN9I4yh4iN2Ybx\u002Fy1RM7rMmAesA0k=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fjquery-mousewheel\u002F3.1.13\u002Fjquery.mousewheel.min.js\" integrity=\"sha256-jnOjDTXIPqall8M0MyTSt98JetJuZ7Yu+1Jm7hLTF7U=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fmalihu-custom-scrollbar-plugin\u002F3.1.5\u002Fjquery.mCustomScrollbar.min.js\" integrity=\"sha256-AKEjDiK2rz+d8TSPLNVNydvgJvOkG5veMAnc79FkiuE=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript src=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fpopper.js@1.16.1\u002Fdist\u002Fumd\u002Fpopper.min.js\" integrity=\"sha384-9\u002FreFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript src=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fbootstrap@4.5.3\u002Fdist\u002Fjs\u002Fbootstrap.min.js\" integrity=\"sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr\u002FaWKhXdBNmNb5D92v7s\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer src=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fjson5@2.1.3\u002Fdist\u002Findex.min.js\" integrity=\"sha256-b6dyH0K\u002FnE4K1\u002Fd36PNAa96t19du7JXpzpcS9K3o4Sg=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fjqueryui\u002F1.12.1\u002Fjquery-ui.min.js\" integrity=\"sha256-KM512VNnjElC30ehFwehXjx1YCHPiQkOPmqnrWtpccM=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript src=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fbootstrap-select@1.13.17\u002Fdist\u002Fjs\u002Fbootstrap-select.min.js\" integrity=\"sha256-QOE02Glo1C1gHzP96JOaxyIMt4XSFv\u002FexZaYLY4dwO0=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E";
if (lang === 'pl') {
pug_html = pug_html + "\u003Cscript src=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fbootstrap-select@1.13.17\u002Fjs\u002Fi18n\u002Fdefaults-pl_PL.js\" integrity=\"sha256-aWaZCaqYgueDr4CzKzw7FlKCuaoJEwOOM9LJ79aSmlk=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E";
}
pug_html = pug_html + (null == (pug_interp = (__webpack_require__(8785).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(6603).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(3678).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(802).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(1087).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(8635).call)(this, locals)) ? "" : pug_interp) + "\u003Cscript defer type=\"text\u002Fjavascript\" src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Ftinycolor\u002F1.4.2\u002Ftinycolor.min.js\" integrity=\"sha512-+aXA9mgbUvFe0ToTlbt8\u002F3vT7+nOgUmFw29wfFCsGoh8AZMRSU0p4WtOvC1vkF2JBrndPN2TuNZsHPAKPPxe8Q==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fd3\u002F7.0.0\u002Fd3.min.js\" integrity=\"sha512-0x7\u002FVCkKLLt4wnkFqI8Cgv6no+AaS1TDgmHLOoU3hy\u002FWVtYta2J6gnOIHhYYDJlDxPqEqAYLPS4gzVex4mGJLw==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fd3-cloud\u002F1.2.5\u002Fd3.layout.cloud.min.js\" integrity=\"sha512-HjKxWye8lJGPu5q1u\u002FZYkHlJrJdm6KGr89E6tOrXeKm1mItb1xusPU8QPcKVhP8F9LjpZT7vsu1Fa+dQywP4eg==\" crossorigin=\"anonymous\" referrerpolicy=\"no-referrer\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"https:\u002F\u002Fcdn.jsdelivr.net\u002Fnpm\u002Fseedrandom@3.0.5\u002Fseedrandom.min.js\" integrity=\"sha256-0usXoFraKr8ZyLyx8PGuYrttpdWaadxkFM7QhwSojNE=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"https:\u002F\u002Funpkg.com\u002Fbootstrap-table@1.20.0\u002Fdist\u002Fbootstrap-table.min.js\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer type=\"text\u002Fjavascript\" src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002FChart.js\u002F3.8.0\u002Fchart.min.js\" integrity=\"sha512-sW\u002Fw8s4RWTdFFSduOTGtk4isV1+190E\u002FGghVffMA9XczdJ2MDzSzLEubKAs5h0wzgSJOQTRYyaz73L3d6RtJSg==\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E\u003Cscript defer src=\"https:\u002F\u002Fcdnjs.cloudflare.com\u002Fajax\u002Flibs\u002Fplotly.js\u002F1.33.1\u002Fplotly-basic.min.js\" integrity=\"sha256-qPutqhXQitI6ydhltlGqtkrcj2rkNRQde60nRB3BIgg=\" crossorigin=\"anonymous\"\u003E\u003C\u002Fscript\u003E" + (null == (pug_interp = (__webpack_require__(727).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(481).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(9712).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(4459).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(3838).call)(this, locals)) ? "" : pug_interp) + (null == (pug_interp = (__webpack_require__(2686).call)(this, locals)) ? "" : pug_interp) + "\u003C\u002Fbody\u003E\u003C\u002Fhtml\u003E";
    }.call(this, "JSON" in locals_for_with ?
        locals_for_with.JSON :
        typeof JSON !== 'undefined' ? JSON : undefined, "Math" in locals_for_with ?
        locals_for_with.Math :
        typeof Math !== 'undefined' ? Math : undefined, "Object" in locals_for_with ?
        locals_for_with.Object :
        typeof Object !== 'undefined' ? Object : undefined, "addSpinner" in locals_for_with ?
        locals_for_with.addSpinner :
        typeof addSpinner !== 'undefined' ? addSpinner : undefined, "buttonTitle" in locals_for_with ?
        locals_for_with.buttonTitle :
        typeof buttonTitle !== 'undefined' ? buttonTitle : undefined, "databaseId" in locals_for_with ?
        locals_for_with.databaseId :
        typeof databaseId !== 'undefined' ? databaseId : undefined, "databaseName" in locals_for_with ?
        locals_for_with.databaseName :
        typeof databaseName !== 'undefined' ? databaseName : undefined, "dictionary" in locals_for_with ?
        locals_for_with.dictionary :
        typeof dictionary !== 'undefined' ? dictionary : undefined, "entityData" in locals_for_with ?
        locals_for_with.entityData :
        typeof entityData !== 'undefined' ? entityData : undefined, "entityDbName" in locals_for_with ?
        locals_for_with.entityDbName :
        typeof entityDbName !== 'undefined' ? entityDbName : undefined, "entityId" in locals_for_with ?
        locals_for_with.entityId :
        typeof entityId !== 'undefined' ? entityId : undefined, "entityName" in locals_for_with ?
        locals_for_with.entityName :
        typeof entityName !== 'undefined' ? entityName : undefined, "entityType" in locals_for_with ?
        locals_for_with.entityType :
        typeof entityType !== 'undefined' ? entityType : undefined, "iconName" in locals_for_with ?
        locals_for_with.iconName :
        typeof iconName !== 'undefined' ? iconName : undefined, "lang" in locals_for_with ?
        locals_for_with.lang :
        typeof lang !== 'undefined' ? lang : undefined, "mapOptions" in locals_for_with ?
        locals_for_with.mapOptions :
        typeof mapOptions !== 'undefined' ? mapOptions : undefined, "metadata" in locals_for_with ?
        locals_for_with.metadata :
        typeof metadata !== 'undefined' ? metadata : undefined, "pageName" in locals_for_with ?
        locals_for_with.pageName :
        typeof pageName !== 'undefined' ? pageName : undefined, "regionsDic" in locals_for_with ?
        locals_for_with.regionsDic :
        typeof regionsDic !== 'undefined' ? regionsDic : undefined, "remains" in locals_for_with ?
        locals_for_with.remains :
        typeof remains !== 'undefined' ? remains : undefined, "spinnerText" in locals_for_with ?
        locals_for_with.spinnerText :
        typeof spinnerText !== 'undefined' ? spinnerText : undefined, "text" in locals_for_with ?
        locals_for_with.text :
        typeof text !== 'undefined' ? text : undefined, "toString" in locals_for_with ?
        locals_for_with.toString :
        typeof toString !== 'undefined' ? toString : undefined, "year_end" in locals_for_with ?
        locals_for_with.year_end :
        typeof year_end !== 'undefined' ? year_end : undefined, "year_start" in locals_for_with ?
        locals_for_with.year_start :
        typeof year_start !== 'undefined' ? year_start : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 539:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var pug = __webpack_require__(7055);

function template(locals) {var pug_html = "", pug_mixins = {}, pug_interp;;
    var locals_for_with = (locals || {});
    
    (function (Date) {
      pug_html = pug_html + "\u003Cfooter\u003E\u003Cp\u003EInstitute of Bioorganic Chemistry Polish Academy of Sciences, " + (pug.escape(null == (pug_interp = new Date().getFullYear()) ? "" : pug_interp)) + "\u003C\u002Fp\u003E\u003C\u002Ffooter\u003E";
    }.call(this, "Date" in locals_for_with ?
        locals_for_with.Date :
        typeof Date !== 'undefined' ? Date : undefined));
    ;;return pug_html;};
module.exports = template;

/***/ }),

/***/ 7055:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";


var pug_has_own_property = Object.prototype.hasOwnProperty;

/**
 * Merge two attribute objects giving precedence
 * to values in object `b`. Classes are special-cased
 * allowing for arrays and merging/joining appropriately
 * resulting in a string.
 *
 * @param {Object} a
 * @param {Object} b
 * @return {Object} a
 * @api private
 */

exports.merge = pug_merge;
function pug_merge(a, b) {
  if (arguments.length === 1) {
    var attrs = a[0];
    for (var i = 1; i < a.length; i++) {
      attrs = pug_merge(attrs, a[i]);
    }
    return attrs;
  }

  for (var key in b) {
    if (key === 'class') {
      var valA = a[key] || [];
      a[key] = (Array.isArray(valA) ? valA : [valA]).concat(b[key] || []);
    } else if (key === 'style') {
      var valA = pug_style(a[key]);
      valA = valA && valA[valA.length - 1] !== ';' ? valA + ';' : valA;
      var valB = pug_style(b[key]);
      valB = valB && valB[valB.length - 1] !== ';' ? valB + ';' : valB;
      a[key] = valA + valB;
    } else {
      a[key] = b[key];
    }
  }

  return a;
}

/**
 * Process array, object, or string as a string of classes delimited by a space.
 *
 * If `val` is an array, all members of it and its subarrays are counted as
 * classes. If `escaping` is an array, then whether or not the item in `val` is
 * escaped depends on the corresponding item in `escaping`. If `escaping` is
 * not an array, no escaping is done.
 *
 * If `val` is an object, all the keys whose value is truthy are counted as
 * classes. No escaping is done.
 *
 * If `val` is a string, it is counted as a class. No escaping is done.
 *
 * @param {(Array.<string>|Object.<string, boolean>|string)} val
 * @param {?Array.<string>} escaping
 * @return {String}
 */
exports.classes = pug_classes;
function pug_classes_array(val, escaping) {
  var classString = '',
    className,
    padding = '',
    escapeEnabled = Array.isArray(escaping);
  for (var i = 0; i < val.length; i++) {
    className = pug_classes(val[i]);
    if (!className) continue;
    escapeEnabled && escaping[i] && (className = pug_escape(className));
    classString = classString + padding + className;
    padding = ' ';
  }
  return classString;
}
function pug_classes_object(val) {
  var classString = '',
    padding = '';
  for (var key in val) {
    if (key && val[key] && pug_has_own_property.call(val, key)) {
      classString = classString + padding + key;
      padding = ' ';
    }
  }
  return classString;
}
function pug_classes(val, escaping) {
  if (Array.isArray(val)) {
    return pug_classes_array(val, escaping);
  } else if (val && typeof val === 'object') {
    return pug_classes_object(val);
  } else {
    return val || '';
  }
}

/**
 * Convert object or string to a string of CSS styles delimited by a semicolon.
 *
 * @param {(Object.<string, string>|string)} val
 * @return {String}
 */

exports.style = pug_style;
function pug_style(val) {
  if (!val) return '';
  if (typeof val === 'object') {
    var out = '';
    for (var style in val) {
      /* istanbul ignore else */
      if (pug_has_own_property.call(val, style)) {
        out = out + style + ':' + val[style] + ';';
      }
    }
    return out;
  } else {
    return val + '';
  }
}

/**
 * Render the given attribute.
 *
 * @param {String} key
 * @param {String} val
 * @param {Boolean} escaped
 * @param {Boolean} terse
 * @return {String}
 */
exports.attr = pug_attr;
function pug_attr(key, val, escaped, terse) {
  if (
    val === false ||
    val == null ||
    (!val && (key === 'class' || key === 'style'))
  ) {
    return '';
  }
  if (val === true) {
    return ' ' + (terse ? key : key + '="' + key + '"');
  }
  var type = typeof val;
  if (
    (type === 'object' || type === 'function') &&
    typeof val.toJSON === 'function'
  ) {
    val = val.toJSON();
  }
  if (typeof val !== 'string') {
    val = JSON.stringify(val);
    if (!escaped && val.indexOf('"') !== -1) {
      return ' ' + key + "='" + val.replace(/'/g, '&#39;') + "'";
    }
  }
  if (escaped) val = pug_escape(val);
  return ' ' + key + '="' + val + '"';
}

/**
 * Render the given attributes object.
 *
 * @param {Object} obj
 * @param {Object} terse whether to use HTML5 terse boolean attributes
 * @return {String}
 */
exports.attrs = pug_attrs;
function pug_attrs(obj, terse) {
  var attrs = '';

  for (var key in obj) {
    if (pug_has_own_property.call(obj, key)) {
      var val = obj[key];

      if ('class' === key) {
        val = pug_classes(val);
        attrs = pug_attr(key, val, false, terse) + attrs;
        continue;
      }
      if ('style' === key) {
        val = pug_style(val);
      }
      attrs += pug_attr(key, val, false, terse);
    }
  }

  return attrs;
}

/**
 * Escape the given string of `html`.
 *
 * @param {String} html
 * @return {String}
 * @api private
 */

var pug_match_html = /["&<>]/;
exports.escape = pug_escape;
function pug_escape(_html) {
  var html = '' + _html;
  var regexResult = pug_match_html.exec(html);
  if (!regexResult) return _html;

  var result = '';
  var i, lastIndex, escape;
  for (i = regexResult.index, lastIndex = 0; i < html.length; i++) {
    switch (html.charCodeAt(i)) {
      case 34:
        escape = '&quot;';
        break;
      case 38:
        escape = '&amp;';
        break;
      case 60:
        escape = '&lt;';
        break;
      case 62:
        escape = '&gt;';
        break;
      default:
        continue;
    }
    if (lastIndex !== i) result += html.substring(lastIndex, i);
    lastIndex = i + 1;
    result += escape;
  }
  if (lastIndex !== i) return result + html.substring(lastIndex, i);
  else return result;
}

/**
 * Re-throw the given `err` in context to the
 * the pug in `filename` at the given `lineno`.
 *
 * @param {Error} err
 * @param {String} filename
 * @param {String} lineno
 * @param {String} str original source
 * @api private
 */

exports.rethrow = pug_rethrow;
function pug_rethrow(err, filename, lineno, str) {
  if (!(err instanceof Error)) throw err;
  if ((typeof window != 'undefined' || !filename) && !str) {
    err.message += ' on line ' + lineno;
    throw err;
  }
  var context, lines, start, end;
  try {
    str = str || (__webpack_require__(7835).readFileSync)(filename, {encoding: 'utf8'});
    context = 3;
    lines = str.split('\n');
    start = Math.max(lineno - context, 0);
    end = Math.min(lines.length, lineno + context);
  } catch (ex) {
    err.message +=
      ' - could not read from ' + filename + ' (' + ex.message + ')';
    pug_rethrow(err, null, lineno);
    return;
  }

  // Error context
  context = lines
    .slice(start, end)
    .map(function(line, i) {
      var curr = i + start + 1;
      return (curr == lineno ? '  > ' : '    ') + curr + '| ' + line;
    })
    .join('\n');

  // Alter exception message
  err.path = filename;
  try {
    err.message =
      (filename || 'Pug') +
      ':' +
      lineno +
      '\n' +
      context +
      '\n\n' +
      err.message;
  } catch (e) {}
  throw err;
}


/***/ }),

/***/ 7835:
/***/ (() => {

/* (ignored) */

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";

;// CONCATENATED MODULE: ./views/pages/entity/css/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/map-modal/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const map_modal_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/pages/map/data/attributesTypes.json
const attributesTypes_namespaceObject = {};
;// CONCATENATED MODULE: ./views/pages/map/data/attributesTable.js

let sex = {
  "name": "Sex",
  "visible": false
};
let haplogroupY = {
  "name": "Haplogroup Y",
  "type": "tree",
  "visible": false
};
let haplogroupMt = {
  "name": "Haplogroup Mt",
  "type": "tree",
  "visible": false
};
let admixture = {
  "name": "Admixture",
  "type": "admixture",
  "visible": false,
  "isOptgroup": true
};
let pca = {
  "name": "PCA",
  "type": "plot",
  "visible": false,
  "isOptgroup": true
};
let umap = {
  "name": "UMAP",
  "type": "plot",
  "visible": false,
  "isOptgroup": true
};
var attributesTable = {
  "RemainsAADR": {
    _order: ['sex', 'haplogroup_y', 'haplogroup_mt', 'admixture', 'pca', 'umap'],
    sex: sex,
    haplogroup_y: haplogroupY,
    haplogroup_mt: haplogroupMt,
    admixture: admixture,
    pca: pca,
    umap: umap //...admixturesDict

    /*results: {
        name: "Analysis results",
        isOptgroup: true,
        options: {
            admixture: admixture
        }
    }*/

  },
  "PersonAADR": {
    _order: ['sex', 'haplogroup_y', 'haplogroup_mt'],
    sex: sex,
    haplogroup_y: haplogroupY,
    haplogroup_mt: haplogroupMt
  },
  "PersonEMPOP": {
    _order: ['haplogroup_mt'],
    haplogroup_mt: haplogroupMt
  }
};
const attributesWithTypes = ['admixture', 'pca', 'umap'];

function getAttributesTable() {
  let attributesTableClone = ArcheoUtilities.deepCloneObject(attributesTable);
  attributesWithTypes.forEach(attribute => {
    let attributeName = window.metadata.props_keys[attribute];
    Object.keys(attributesTable).forEach(databaseName => {
      if (attribute in attributesTableClone[databaseName]) {
        for (var i = 0; i < window.metadata[attributeName].id.length; ++i) {
          let typeId = window.metadata[attributeName].id[i];
          let typeName = window.metadata[attributeName].name[i];
          attributesTableClone[databaseName][typeId] = {
            "name": typeName,
            "type": attribute,
            "parent": attribute,
            "visible": false,
            "selected": false
          };

          attributesTableClone[databaseName]._order.push(typeId);
        }
      }
    });
  });
  return attributesTableClone;
}

/* harmony default export */ const data_attributesTable = (getAttributesTable);
;// CONCATENATED MODULE: ./views/mixins-pug/map-modal/utilities.js
function getTableData(features, tableAttributesDict) {
  let data = [];

  for (let i = 0; i < features.length; ++i) {
    let featureProperties = features[i].get('properties');
    let row = {
      id: featureProperties.id,
      place: 'site' in featureProperties ? featureProperties.site : featureProperties.place,
      dating: featureProperties.dating,
      state: true
    };

    tableAttributesDict._order.forEach(attributeId => {
      let attributeInfo = tableAttributesDict[attributeId];

      if (attributeInfo.isOptgroup !== true) {
        /* Prevent general category to be fetched */
        if (attributeInfo.type === 'admixture') {
          let legend = ArcheoSession.getAdmixtureLegend(attributeId);
          let names = legend._order;
          let colors = names.map(name => legend[name].color);
          row[attributeId] = {
            values: ArcheoUtilities.getFeaturesAttributeValue(featureProperties[attributeId]),
            names: names,
            colors: colors
          };
        } else row[attributeId] = ArcheoUtilities.getFeaturesAttributeValue(featureProperties[attributeId]);
      }
    });

    data.push(row);
  }

  return data;
}

function getAttributeHeaderHTML(attributeName) {
  return `<i class="material-icons table-filter-icon trigger">filter_list</i> <span class="attribute-name">${attributeName}</span> <i class="material-icons table-order-icon trigger"></i>`;
}

function getPlotlyTraceDict(features, attributeId) {
  let results = features.map(feature => {
    let props = feature.get('properties');
    return {
      id: props.id,
      label: props.population || 'MISSING',
      x: props[attributeId] ? props[attributeId].value[0] : null,
      y: props[attributeId] ? props[attributeId].value[1] : null
    };
  });
  results = results.filter(result => result.x !== null);
  return results;
}

function createDatasetTableToModal($modalContent, modalCount, datasetId, features, tableAttributesDict, tableParams = {}) {
  return new Promise((resolution, rejection) => {
    let newDatasetElement = $(`#features-dataset-template`).clone();
    /* Assign new dataset id */

    newDatasetElement.attr('id', `${datasetId}-features-${modalCount}`);
    newDatasetElement.attr('dataset-id', datasetId);
    newDatasetElement.find('.accordion-header').attr('data-target', `#${datasetId}-features-${modalCount}-accordion`);
    newDatasetElement.find('.collapse').attr('id', `${datasetId}-features-${modalCount}-accordion`);
    /* Initialize download button */

    let downloadButt = newDatasetElement.find('#file_download');
    downloadButt.attr('id', `${datasetId}-${modalCount}-features_file_download`);
    downloadButt.next().attr('for', `${datasetId}-${modalCount}-features_file_download`);
    downloadButt.on('click', function (event) {});
    let datasetInfo = ArcheoSession.get().datasets[datasetId];
    let databaseName = datasetInfo.databaseName;
    let entityName = datasetInfo.entityName;
    /* Initialize dataset name */

    let $header = newDatasetElement.find('.accordion-header .header-text');
    $header.html(datasetInfo.name);
    /* Initialize search */

    let $search = newDatasetElement.find('#features-dataset-search');
    $search.attr('id', `${datasetId}-${modalCount}-features-dataset-search`);
    /* Initialize table */

    let $table = newDatasetElement.find('.table');
    /* Prepare columns */

    let columns = [];
    let columnId = 0;

    tableAttributesDict._order.forEach(attributeId => {
      let attributeInfo = tableAttributesDict[attributeId];
      let config = {
        field: attributeId,
        title: getAttributeHeaderHTML(attributeInfo.name),
        searchable: true,
        sortable: true,
        switchable: true,
        visible: attributeInfo.visible
      };
      columnId = columns.length;

      if (attributeInfo.type === 'admixture') {
        config = { ...config,
          searchable: false,
          title: `<span class="attribute-name">${attributeInfo.name}</span> <i class="material-icons table-order-icon trigger"></i>`,
          formatter: (attributeData, row, rowIndex, field) => {
            if (attributeData.values === 'MISSING') return 'MISSING';else {
              let $piechart = $('<div/>', {
                class: "piechart",
                'row-index': rowIndex,
                field: field
              });
              return $piechart[0].outerHTML;
            }
          },
          sorter: (fieldA, fieldB, rowA, rowB) => {
            let fieldAIds = fieldA.values.argSortNumbers();
            let fieldBIds = fieldB.values.argSortNumbers();
            return fieldAIds.compNumbers(fieldBIds);
          }
        };
      }

      columns.push(config);
    });
    /* Prepare data */


    let data = getTableData(features, tableAttributesDict);
    $table.bootstrapTable({
      pagination: true,
      clickToSelect: true,
      pageList: [10, 25, 50, 100, 500],
      checkboxHeader: true,
      idField: "id",
      maintainMetaData: true,
      rowStyle: () => ({
        classes: 'table-row'
      }),
      columns: [{
        checkbox: true,
        field: 'state'
      }, {
        field: 'id',
        sortable: true,
        title: 'ID',
        searchable: true,
        switchable: false,
        formatter: value => {
          if (ArcheoUtilities.isValid(datasetInfo.isCustom)) return value;else return `<a href="/en/db/${encodeURIComponent(databaseName)}/entity/${encodeURIComponent(entityName)}/${encodeURIComponent(value)}">${value}</a>`;
        }
      }, {
        field: 'place',
        sortable: true,
        title: datasetInfo.isPresent == false ? 'Site' : 'Place',
        searchable: true,
        switchable: true,
        formatter: value => {
          return value.name;
        }
      }, {
        field: 'dating',
        sortable: true,
        searchable: false,
        switchable: true,
        title: getAttributeHeaderHTML('Dating'),
        // LANG
        formatter: dating => {
          if (ArcheoUtilities.isValid(dating)) {
            let yearStart = dating.year_start;
            let yearEnd = dating.year_end;
            return ArcheoUtilities.getFormattedYear(yearStart) + ' &mdash; ' + ArcheoUtilities.getFormattedYear(yearEnd);
          } else return "present"; // LANG						

        },
        sorter: (datingA, datingB) => {
          return parseInt(datingA.year_start) - parseInt(datingB.year_start) || parseInt(datingA.year_end) - parseInt(datingB.year_end);
        }
      }, ...columns],
      data: data
    });
    /* Move search element */

    let $toolbar = $table.parents('.bootstrap-table').find('.fixed-table-toolbar');
    $search.parent().parent().detach().appendTo($toolbar);
    /* Generate content for the columns toggle dropdown */
    //let toggleableAttributes = [ 'place', 'dating', ...Object.keys(tableAttributesDict)];

    let toggleableAttributes = tableAttributesDict._order;
    let $columnsDropdown = newDatasetElement.find('.column-toggle-dropdown .dropdown-menu');
    let $attributesTypes = {};

    for (var j = 0; j < toggleableAttributes.length; ++j) {
      let attributeId = toggleableAttributes[j];
      let attributeData = tableAttributesDict[attributeId];
      let isAttributeType = attributeData.isOptgroup;

      if (isAttributeType === true) {
        let $attributeType = $('#column-toggle-dropdown-attribute-type-template').clone();
        $attributeType.find('.attribute-type-wrapper').text(attributeData.name);
        $attributesTypes[attributeId] = $attributeType.find('.dropdown-menu');
        $attributeType.appendTo($columnsDropdown);
        $attributeType.removeClass('hidden');
        $attributeType.removeAttr('id');
      } else {
        let $attribute = $('#column-toggle-dropdown-attribute-template').clone();
        $attribute.find('label').text(attributeData.name);
        $attribute.attr('attribute-id', attributeId);
        $attribute.find('input[type=checkbox]').prop("checked", attributeData.visible);

        if (attributeData.parent) {
          $attribute.appendTo($attributesTypes[attributeData.parent]);
        } else {
          $attribute.appendTo($columnsDropdown);
        }

        $attribute.removeClass('hidden');
        $attribute.removeAttr('id');
      }
    }
    /* Handle loading missing data */


    function handleLoadMissingData(attributeId, checked) {
      return new Promise((resolution, rejection) => {
        if (checked === true) {
          let anyFeatureProperties = features[0].get('properties');
          let attributeValue = anyFeatureProperties[attributeId];
          let isAttributeAvailable = ArcheoUtilities.isValid(attributeValue);
          let isAttributeIncorportable = (attributeId in tableAttributesDict);

          if (isAttributeIncorportable) {
            /* Hide column if the data is absent */
            if (isAttributeAvailable === false) $table.bootstrapTable('hideColumn', attributeId);
            ArcheoRequests.incorporateAttributes({
              datasetId: datasetId,
              attributeId: attributeId,
              attributeType: tableAttributesDict[attributeId] ? tableAttributesDict[attributeId].type : ''
            }).then(() => {
              // Load data again //
              let data = getTableData(features, tableAttributesDict);
              $table.bootstrapTable('load', data);
              resolution(true);
            });
          } else resolution(true);
        }
      });
    }

    $columnsDropdown.on('change', 'input[type=checkbox]', function (e) {
      let $checkbox = $(e.target);
      let status = $checkbox.is(":checked");
      let $wrapper = $checkbox.parent();
      let attributeName = $checkbox.siblings('label').text();
      let attributeId = $wrapper.attr('attribute-id');
      let attributeTypeName = tableAttributesDict[attributeId].type;
      if (status === true) handleLoadMissingData(attributeId, true).then(() => {
        if (attributeTypeName == 'pca' || attributeTypeName == 'umap') {
          let plotId = `${attributeId}_${parseInt(Math.random() * 10000)}`;
          let $tableWrapper = $table.parent(); //let $samplesSection = $table.parents('.samples-section');

          let $plot = $('<div>', {
            id: plotId,
            class: `${attributeId} plot`,
            //text: attributeId,
            "attribute-id": attributeId
          }).appendTo($tableWrapper);
          ArcheoRequests.incorporateAttributes({
            datasetId: datasetId,
            attributeId: 'population',
            attributeType: ''
          }).then(() => {
            /* Create plotly plot with all features data */
            let allDatasetFeatures = ArcheoMap.getDatasetFeatures(datasetId);
            let results = getPlotlyTraceDict(allDatasetFeatures, attributeId);
            ArcheoUI.createPlotly(plotId, results, attributeName, {
              opacity: 0.4,
              showLegend: false
            });
            /* Create plotly trace with highlit cluster's features */

            results = getPlotlyTraceDict(features, attributeId);
            ArcheoUI.addPlotlyTrace(plotId, results, {});
          });
        } else $table.bootstrapTable('showColumn', attributeId);
      });else {
        if (attributeTypeName == 'pca' || attributeTypeName == 'umap') {
          $table.find('.plot').remove();
        } else $table.bootstrapTable('hideColumn', attributeId);
      }
    });
    $table.on('mouseenter mouseout', '.table-row', function (event) {
      let rowId = parseInt($(event.target).parent('.table-row').attr('data-index'));
      let featureData = $table.bootstrapTable('getData')[rowId];
      $table.find('.js-plotly-plot').each(function () {
        let plotId = $(this).attr('id');
        let attributeId = $(this).attr('attribute-id');

        if (ArcheoUtilities.isArray(featureData[attributeId]) && event.type === "mouseenter") {
          let featureTraceData = {
            id: featureData.id,
            x: featureData[attributeId][0],
            y: featureData[attributeId][1]
          };
          ArcheoUI.hoverPlotlyFeature(plotId, true, featureTraceData);
        } else {
          ArcheoUI.hoverPlotlyFeature(plotId, false);
        }
      });
    });
    /* Pass sort event on proper custom icon click */

    $table.on('click', '.table-order-icon', function (event) {
      let $el = $(event.target);

      if ($el.hasClass('table-order-icon')) {
        $el.parent().removeClass('both');
        return true;
      } else return false;
    });
    /* Handle filtering */

    $table.on('click', '.table-filter-icon', function (event) {
      let $el = $(event.target);

      if ($el.hasClass('active')) {
        $el.removeClass('active');
        $search.attr('placeholder', `Filter by attributes...`);
        $search.removeProp('attribute');
      } else {
        /* Clear styling for all filter icons */
        $table.find('.table-filter-icon').removeClass('active');
        $el.addClass('active');
        let $header = $el.parents('th[data-field]');
        let attributeId = $header.attr('data-field');
        let attributeName = $header.find('.attribute-name').text();
        $search.attr('placeholder', `Filter by ${attributeName}...`);
        $search.prop('attribute-id', attributeId);
      }

      return false;
    });
    /* Handle filter events */

    $search.on('input update', function (event) {
      let attributeId = $search.prop('attribute-id');
      let searchValue = $search.val();

      if (ArcheoUtilities.isValidNonEmptyString(searchValue)) {
        if (ArcheoUtilities.isValid(attributeId)) {
          $table.bootstrapTable('filterBy', {
            [attributeId]: searchValue
          }, {
            filterAlgorithm: 'and'
          });
        } else {
          $table.bootstrapTable('filterBy', {
            common: searchValue
          }, {
            filterAlgorithm: (row, filters) => {
              let isFound = false;

              for (let key in row) {
                if (key !== 'state') isFound = row[key].startsWith(filters.common) || isFound;
              }

              return isFound;
            }
          });
        }
      } else {
        $table.bootstrapTable('filterBy', {}, {
          filterAlgorithm: 'and'
        });
      }
    });
    /* Handle piecharts generation */

    $table.on('post-body.bs.table update', function (event, data) {
      $table.find('.piechart').each((index, el) => {
        let $canvas = $('<canvas/>', {
          width: 50,
          height: 50
        });
        $canvas[0].width = 50;
        $canvas[0].height = 50;
        $canvas.appendTo(el);
        let rowIndex = parseInt(el.getAttribute('row-index'));
        let field = el.getAttribute('field');
        let admixtureData = data[rowIndex][field];
        new Chart($canvas[0], {
          type: 'pie',
          data: {
            labels: admixtureData.names,
            datasets: [{
              //label: 'My First Dataset',
              data: admixtureData.values,
              backgroundColor: admixtureData.colors,
              hoverOffset: 0,
              borderWidth: 1,
              borderColor: '#000'
            }]
          },
          options: {
            responsive: false,
            plugins: {
              legend: {
                display: false
              }
            },
            animation: {
              duration: 0
            }
          }
        });
      });
    });
    $table.bootstrapTable('load', data);
    $modalContent.append(newDatasetElement);
    newDatasetElement.removeClass('hidden');
    /* Trigger certain attributes as in params */

    if ('visible' in tableParams) {
      tableParams.visible.forEach(attributeId => {
        $table.trigger('column-switch.bs.table', [attributeId, true]);
      });
    }

    resolution(newDatasetElement);
  });
}


;// CONCATENATED MODULE: ./views/mixins-pug/map-modal/script.js



async function addDataToModal(clusters, newModalElement, tableParams = {}) {
  //let $modalContent = newModalElement.find('.map-modal-content .mCSB_container');
  let $modalContent = newModalElement.find('.map-modal-content');
  let baseUrl = `/${window.lang}/entity`;
  let datasetsIds = [];
  let datasetFeatures = {};
  let datasetAttributes = {};
  let attributesTable = data_attributesTable();
  clusters.forEach((cluster, clusterIndex) => {
    let features = cluster.values_.features;
    let layerId = cluster.values_.layerId;
    let datasetId = ArcheoSession.get().layers[layerId].datasetId;
    let dataset = ArcheoSession.get().datasets[datasetId];
    let objectId = dataset.objectId;

    if (!datasetsIds.has(datasetId)) {
      datasetsIds.push(datasetId);
      datasetFeatures[datasetId] = {}; //[];

      datasetAttributes[datasetId] = {};
    }
    /* Get all possible columns */


    if (dataset.isCustom) {
      datasetAttributes[datasetId] = ArcheoUtilities.deepCloneObject(dataset.attributesDict);
      datasetAttributes[datasetId]._order = Object.keys(dataset.attributesDict);
    } else datasetAttributes[datasetId] = ArcheoUtilities.deepCloneObject(attributesTable[objectId]);
    /* Set visibility for attributes visualized at the moment on the map */


    let layerAttributeId = ArcheoSession.get().layers[layerId].attributeId;
    let layerAttributeType = ArcheoSession.get().layers[layerId].attributeType;
    if (layerAttributeId in datasetAttributes[datasetId]) datasetAttributes[datasetId][layerAttributeId].visible = true;

    for (var i = 0; i < features.length; ++i) {
      let feature = features[i];
      datasetFeatures[datasetId][feature.id_] = feature;
    }
  });
  let modalCount = ArcheoCache.getTemporaryEntry('features-modals-count');
  datasetsIds.forEach(datasetId => {
    createDatasetTableToModal($modalContent, modalCount, datasetId, Object.values(datasetFeatures[datasetId]), datasetAttributes[datasetId], tableParams).then(newDatasetElement => {
      if (datasetsIds.length == 1) newDatasetElement.find('.accordion-header').trigger('click');
    });
  });
  ArcheoCache.incrementTemporaryEntry('features-modals-count', 1);
}

function showFeaturesModal(clusters, newModalElement, interactionEvent = null, tableParams = {}) {
  addDataToModal(clusters, newModalElement, tableParams);
  /*if(ArcheoUtilities.isValid(event)) {
    newModalElement.dialog("option", "position", { my: "left top", at: "left top", of: event });
  }*/
  // content-wrapper

  if (newModalElement.dialog("isOpen") === false) {
    newModalElement.dialog("open");
    newModalElement.removeClass('hidden');
  }
}

function createMapModal($modalTemplate, clusters, interactionEvent = null, tableParams = {}) {
  /* Create new modal object */
  let newModalElement = $modalTemplate.clone();
  newModalElement.removeAttr('id');
  newModalElement.dialog({
    appendTo: "#map-wrapper",
    position: {
      my: "center top",
      at: "center top",
      of: $("#map")
    },
    autoOpen: false,
    width: parseInt(window.innerWidth * 0.5),
    height: parseInt(window.innerHeight * 0.7),
    show: {
      effect: "fade",
      duration: 500
    },
    hide: {
      effect: "fade",
      duration: 500
    }
  });
  showFeaturesModal(clusters, newModalElement, interactionEvent, tableParams);
}


;// CONCATENATED MODULE: ./views/pages/entity/js/events/map/interaction.js


function redrawMapOnWindowSize(map, timeInterval = 300) {
  $(window).resize(function () {
    setTimeout(function () {
      map.updateSize();
    }, timeInterval);
  });
}

function updateSessionOnMove(map) {
  map.on('moveend', function (event) {
    let view = map.getView();
    let position = ArcheoMap.getCoordinatesProjectedToData(view.getCenter());
    let zoom = view.getZoom();
    let $latitude = $('#map-latitude');
    let $longitude = $('#map-longitude');
    $latitude.text(ArcheoUtilities.round(position[0], 4));
    $longitude.text(ArcheoUtilities.round(position[1], 4));
  });
}

function clearMapOnZoom(map) {
  /* Fix for persisting piechart labels on zoom level changes */
  map.getView().on('change:resolution', event => {
    ArcheoMap.clearPiechartLabels();
  });
}

function mapFeatureModal(map) {
  $('#map').on('map-modal', function (event, data) {
    let $modalTemplate = $(`#features-map-modal-template`);
    let tableParams = {
      'visible': ['haplogroup_y', 'haplogroup_mt', 'sex', 'admixture_k7']
    };
    createMapModal($modalTemplate, data.clusters, data.interactionEvent, tableParams);
  });
}

function initializeInteractionEvents() {
  var map = ArcheoMap.getMap();
  redrawMapOnWindowSize(map);
  updateSessionOnMove(map);
  clearMapOnZoom(map);
  mapFeatureModal(map);
}

/* harmony default export */ const interaction = (initializeInteractionEvents);
;// CONCATENATED MODULE: ./views/pages/entity/js/events/map/index.js


function changeClusterStrategyEvent() {
  $('#map').on('cluster-strategy-change', function (event, data) {
    let regionId = data.config.method.region;
    let regionsLayer = ArcheoMap.getRegionsLayer();
    regionsLayer.getSource().clear();
    /* Trigger filtering to assign feature to the proper region basing on timeline filter */

    ArcheoMap.triggerClusterFilters();
    let entityMapFeature = ArcheoMap.getMapLayerFeatures(window.layerId)[0];
    let isRegionClusteringModeActive = ArcheoUtilities.isValidNonEmptyString(regionId) && ArcheoUtilities.isValid(entityMapFeature);

    if (isRegionClusteringModeActive) {
      let regionsDict = ArcheoMap.getMapRegions(); //let regionIds = window.entityFeature.regionsIds;

      let regionId = entityMapFeature.getProperties().regionId;
      let regionIds = [regionId];
      regionIds.forEach(regionId => {
        let regionInfo = regionsDict[regionId];
        if (!ArcheoUtilities.isValid(regionInfo.polygon)) ArcheoMap.fetchAndAddRegionPolygon(regionId, regionsLayer);else regionsLayer.getSource().addFeature(regionInfo.polygon);
      });
    } else {
      regionsLayer.getSource().clear();
    }

    ArcheoMap.triggerClusterFilters();
    ArcheoMap.triggerLayerStyleFunction();
    ArcheoEvents.broadcast(['map-regions-updated'], null, {});
  });
}

function initializeMapEvents() {
  interaction();
  changeClusterStrategyEvent();
}

/* harmony default export */ const map = (initializeMapEvents);
;// CONCATENATED MODULE: ./views/pages/entity/js/events/ui/map-options.js
function initializeResetCoordinatesButton() {
  let $restoreButt = $('#coordinates-restore');
  let defaultZoom = ArcheoSession.get().map.zoom;
  $restoreButt.on('click', function (event) {
    let coordinates = [window.entityFeature.coordinates.longitude, window.entityFeature.coordinates.latitude];
    let currentView = ArcheoMap.getMap().getView();
    coordinates = ArcheoMap.getCoordinatesProjectedToMap(coordinates);
    currentView.setCenter(coordinates);
    currentView.setZoom(defaultZoom);
  });
}

function intializeChangeBaseMap() {
  $('#imagery-basemap').on('click', () => {
    ArcheoMap.setBasemap('Imagery');
  });
  $('#osm-basemap').on('click', () => {
    ArcheoMap.setBasemap('OSM');
  });
  $('#light-basemap').on('click', () => {
    ArcheoMap.setBasemap('Light');
  });
}

function initalizeMapOptionsEvents() {
  initializeResetCoordinatesButton();
  intializeChangeBaseMap();
}

/* harmony default export */ const map_options = (initalizeMapOptionsEvents);
;// CONCATENATED MODULE: ./views/pages/entity/js/events/ui/utilities.js
function getBibtexString(source) {
  return `@article{${source.id},\r\n` + `title = {${source.name}},\r\n` + (source.authors.length > 0 ? `author = {${source.authors.join(' and ')}},\r\n` : '') + (ArcheoUtilities.isValid(source.date) ? `year = ${source.date.year},\r\n` : '') + ( //(ArcheoUtilities.isValid(source.date) ? `month = ${source.date.month},\r\n` : '') +
  ArcheoUtilities.isValid(source.volume_and_issue) ? `volume = ${source.volume_and_issue},\r\n` : '') + (ArcheoUtilities.isValid(source.pages) ? `pages = ${source.pages},\r\n` : '') + (ArcheoUtilities.isValid(source.publisher) ? `journal = ${source.publisher},\r\n` : '') + (ArcheoUtilities.isValid(source.hyperlink) ? `url = {${source.hyperlink}}\r\n` : '') + `}`;
}


;// CONCATENATED MODULE: ./views/pages/entity/js/events/ui/source.js
 //+custom-button-image('/img/icons/bibtex.png')(source-id=index class='bibtex-button

function initializeBibtexButton() {
  $('.bibtex-button').on('click', event => {
    let $el = $(event.target);
    let sourceId = $el.parents('.source').attr('source-id');
    let source = window.entityFeature.sources[parseInt(sourceId)];
    let bibtexString = getBibtexString(source);
    ArcheoUI.copyStringToClipboard(bibtexString);
  });
}

function initializeSourceEvents() {
  initializeBibtexButton();
}

/* harmony default export */ const source = (initializeSourceEvents);
;// CONCATENATED MODULE: ./views/mixins-sass/_colors.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const _colors = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/pages/entity/js/events/ui/results.js


function createAdmixturePlot(admixtureId, admixtureName, admixtureValues) {
  let newAdmixtureElement = $(`#result-chart-template`).clone();
  /* Assign new dataset id */

  newAdmixtureElement.attr('id', admixtureId + '_result-chart');
  /* Initialize piechart */

  let $plot = newAdmixtureElement.find('.plot');

  let labels = ArcheoSession.get().legend.attributes[admixtureId]._order; //let colors = labels.map((label) => tinycolor(ArcheoSession.get().legend.attributes[admixtureId][label].color).toHexString() );
  //let dataColors = labels.map((label) => ArcheoSession.get().legend.attributes[admixtureId][label].color );
  // Filter out special attributes


  labels = labels.filter(value => value !== "MISSING" && value !== "OTHER");
  ArcheoUI.initializeChart($plot, [Math.max(150, 30 * admixtureValues.length), 150], admixtureValues, labels, {
    title: admixtureName,
    type: 'bar',
    colors: _colors.palette_primary_color
  });
  /* Initialize label */

  let $label = newAdmixtureElement.find('.label');
  $label.text(admixtureName);
  /* Show element */

  newAdmixtureElement.removeClass('hidden');
  return newAdmixtureElement;
}

function initializeAdmixtureEvents() {
  $('#admixtures-wrapper .collapsable').on('click', function (event) {
    let $wrapper = $(event.target).parent();
    let $content = $wrapper.find('.object-content');
    let areResultPresent = $wrapper.find('.plot').length > 0;
    let noDataAvailable = $wrapper.find('.no-results').length > 0;
    let $loadingContent = $wrapper.find('.loading-content');

    if (areResultPresent === false && noDataAvailable === false) {
      let datasetId = ArcheoCache.getTemporaryEntry('entityDatasetId');
      let admixtureIds = window.metadata.Admixture.id;
      let admixtureNames = window.metadata.Admixture.name;
      let isLoaded = false;
      let promises = [];

      for (let i = 0; i < admixtureIds.length; ++i) {
        let admixtureId = admixtureIds[i];
        let admixtureName = admixtureNames[i];
        let promise = ArcheoRequests.incorporateAttributes({
          datasetId: datasetId,
          attributeId: admixtureId,
          attributeType: 'admixture'
        });
        promises.push(promise);
        promise.then(success => {
          if (success === true && ArcheoUtilities.isValid(window.entityFeature[admixtureId])) {
            let admixtureValues = window.entityFeature[admixtureId].value;
            let newAdmixtureElement = createAdmixturePlot(admixtureId, admixtureName, admixtureValues);

            if (isLoaded === false) {
              $loadingContent.parent().removeClass('loading');
              isLoaded = true;
              setTimeout(function () {
                $loadingContent.parent().remove();
                $content.append(newAdmixtureElement);
              }, 200); // 2ms is the duration of ease out in the style; animation happens when removing class .loading
            } else $content.append(newAdmixtureElement);
          }
        });
      }

      Promise.all(promises).then(() => {
        if (isLoaded === false) {
          $loadingContent.remove();
          $content.append($('<div>', {
            text: "No results available",
            class: "no-results"
          }));
        }
      });
    }
  });
}

function createUMAPPlot($content, UMAPId, UMAPName, plotlyOptions = {}) {
  //, UMAPName, UMAPValues) {
  let newUMAPElement = $(`#result-scatterplot-template`).clone();
  /* Assign new dataset id */

  let plotId = UMAPId + '_result-scatterplot';
  newUMAPElement.attr('id', `${plotId}_wrapper`);
  /* Initialize piechart */

  let $plot = newUMAPElement.find('.plot');
  $plot.attr('id', plotId);
  newUMAPElement.appendTo($content);
  plotlyOptions = {
    featureId: window.entityFeature.id,
    ...plotlyOptions
  };
  return AnalysisUtilities.queryAndDisplayResults(plotId, 'UMAP', UMAPId, UMAPName, plotlyOptions);
}

function initializeUMAPEvents() {
  $('#umap-wrapper .collapsable').on('click', function (event) {
    let $wrapper = $(event.target).parent();
    let $content = $wrapper.find('.object-content');
    let areResultPresent = $wrapper.find('.plot').length > 0;
    let noDataAvailable = $wrapper.find('.no-results').length > 0;
    let promises = [];

    if (areResultPresent === false && noDataAvailable === false) {
      window.entityFeature.umap_types.forEach(UMAPType => {
        let promise = createUMAPPlot($content, UMAPType.id, UMAPType.name);
        promises.push(promise);
        promise.then(plotId => {
          let $plotWrapper = $(`#${plotId}`).parent('.result-scatterplot');
          setTimeout(function () {
            $plotWrapper.removeClass('hidden');
          }, 200);
        });
      });
      let $loading = $content.children('.loading-results-wrapper');

      if (promises.length > 0) {
        Promise.all(promises).then(() => {
          if ($loading.length > 0) {
            $loading.removeClass('loading');
            $loading.remove();
          }
        });
      } else {
        $loading.remove();
        $content.append($('<div>', {
          text: "No results available",
          class: "no-results"
        }));
      }
    }
  });
}

function createPCAPlot($content, PCAId, PCAName) {
  //, PCAName, UMAPValues) {
  let newPCAElement = $(`#result-scatterplot-template`).clone();
  /* Assign new dataset id */

  let plotId = PCAId + '_result-scatterplot';
  newPCAElement.attr('id', `${plotId}_wrapper`);
  /* Initialize piechart */

  let $plot = newPCAElement.find('.plot');
  $plot.attr('id', plotId);
  newPCAElement.appendTo($content); //newPCAElement.removeClass("hidden");

  let plotlyOptions = {
    featureId: window.entityFeature.id
  };
  return AnalysisUtilities.queryAndDisplayResults(plotId, 'PCA', PCAId, PCAName, plotlyOptions);
}

function initializePCAEvents() {
  $('#pca-wrapper .collapsable').on('click', function (event) {
    let $wrapper = $(event.target).parent();
    let $content = $wrapper.find('.object-content');
    let areResultPresent = $wrapper.find('.plot').length > 0;
    let noDataAvailable = $wrapper.find('.no-results').length > 0;
    let promises = [];

    if (areResultPresent === false && noDataAvailable === false) {
      window.entityFeature.pca_types.forEach(PCAType => {
        let promise = createPCAPlot($content, PCAType.id, PCAType.name);
        promises.push(promise);
        promise.then(plotId => {
          let $plotWrapper = $(`#${plotId}`).parent('.result-scatterplot');
          setTimeout(function () {
            $plotWrapper.removeClass('hidden');
          }, 200);
        });
      });
      let $loading = $content.children('.loading-results-wrapper');

      if (promises.length > 0) {
        Promise.all(promises).then(() => {
          if ($loading.length > 0) {
            $loading.removeClass('loading');
            $loading.remove();
          }
        });
      } else {
        $loading.remove();
        $content.append($('<div>', {
          text: "No results available",
          class: "no-results"
        }));
      }
    }
  });
}

function initializeResultsEvents() {
  initializeAdmixtureEvents();
  initializeUMAPEvents();
  initializePCAEvents();
}

/* harmony default export */ const results = (initializeResultsEvents);
;// CONCATENATED MODULE: ./views/pages/entity/js/events/ui/download.js
function initializeDownloadEvents() {
  // `/:dbName/entity/:entityType/:entityId`
  $('#download-button').on('click', event => {
    $('#download-button .label').text("Downloading...");
    new Promise((resolution, rejection) => {
      let query = ArcheoRequests.createGraphqlQuery(window.entityDbName, ['download(lang: $lang)'], {
        'id': window.entityFeature.id
      }, {
        '$lang': 'String'
      });
      ArcheoRequests.queryGraphQL(query, response => {
        let results = response.data[window.entityDbName][0];
        resolution(true);
      });
    }).then(() => {
      $('#download-button .label').text("Download");
      $("#download-modal").modal("hide");
    });
  });
}

/* harmony default export */ const download = (initializeDownloadEvents);
;// CONCATENATED MODULE: ./views/pages/map/js/events/ui/right-sidebar/utilities.js

const possiblePatterns = ['hatch', 'coal', 'dot', 'crosses', 'woven'];

function generateRandomRegionStyle() {
  let patternColor = ArcheoUtilities.randomRGBColorGenerator(true);
  let backgroundColor = ArcheoUtilities.randomRGBColorGenerator(true);
  return {
    name: '',
    color: {
      pattern: patternColor.toRgbString(),
      background: backgroundColor.setAlpha(0.3).toRgbString(),
      stroke: null
    },
    pattern: {
      type: possiblePatterns[ArcheoUtilities.getRandomInt(0, possiblePatterns.length)],
      angle: 45 * ArcheoUtilities.getRandomInt(0, 4),
      scale: 1.0 + 0.25 * ArcheoUtilities.getRandomInt(1, 4),
      spacing: ArcheoUtilities.getRandomInt(10, 21)
    }
  };
}
/* Gather basic data about all certain type's regions */


function promiseFetchRegionsBasicData(regionsTypeId) {
  return new Promise((resolution, rejection) => {
    var filters = {
      'this_is_division': {
        'Division': {
          'id': regionsTypeId
        }
      }
    };
    var selectionSet = ['id', 'name(lang: $lang)', 'centroid {x, y}', 'dating', 'bbox {x, y}'];
    var variablesDeclarations = {
      "$lang": "String"
    };
    let query = ArcheoRequests.createGraphqlQuery('Region', selectionSet, filters, variablesDeclarations);
    /* Register region type entry */

    let regionsLegend = ArcheoSession.get().legend.regions;
    if (!(regionsTypeId in regionsLegend)) regionsLegend[regionsTypeId] = {};
    ArcheoRequests.queryGraphQL(query, response => {
      let regionsDetails = response.data.Region;
      /* Add regions info to the regions dict */

      regionsDetails.forEach(regionInfo => {
        let id = regionInfo.id;
        let centroid = [regionInfo.centroid.x, regionInfo.centroid.y];
        centroid = ArcheoMap.getCoordinatesProjectedToMap(centroid);
        let boundingCoordinates = [];

        for (var i = 0; i < regionInfo.bbox.length; ++i) {
          let corner = [regionInfo.bbox[i].x, regionInfo.bbox[i].y];
          boundingCoordinates.push(ArcheoMap.getCoordinatesProjectedToMap(corner));
        }

        let isThereDatingInfo = ArcheoUtilities.isValid(regionInfo.dating) && ArcheoUtilities.isValid(regionInfo.dating[Object.keys(regionInfo.dating)[0]]);
        let regionName = regionInfo.name;
        let mapRegionInfo = {
          name: regionName,
          type: regionsTypeId,
          centroid: centroid,
          extent: ArcheoMap.getExtentFromBoundingBox(boundingCoordinates)
        };

        if (!(regionName in regionsLegend[regionsTypeId])) {
          if (regionsTypeId === 'cultures') regionsLegend[regionsTypeId][regionName] = generateRandomRegionStyle();
          regionsLegend[regionsTypeId][regionName] = { ...regionsLegend[regionsTypeId][regionName],
            name: regionName,
            filtered: false,
            group: null
          };
        }

        if (isThereDatingInfo) {
          mapRegionInfo.dating = regionInfo.dating;
          mapRegionInfo.datingMean = (regionInfo.dating.year_end - regionInfo.dating.year_start) / 2.0;
        }

        ArcheoMap.setMapRegions(id, mapRegionInfo, regionsTypeId);
      });
      resolution(true);
    }, {
      lang: window.getLang()
    });
  });
}

async function promiseGetDescendantsAttributes(attributeEntity, attributesValuesIds, treeIndex) {
  return new Promise(async function (resolution, rejection) {
    // 	"begins_with": "_starts_with", 
    var filters = {
      'name_in': attributesValuesIds,
      'treeIndex_starts_with': treeIndex
    };
    var selectionSet = ['name']; //var variablesDeclarations = {"$lang": "String"};

    let query = ArcheoRequests.createGraphqlQuery(attributeEntity, selectionSet, filters //variablesDeclarations
    );
    ArcheoRequests.queryGraphQL(query, response => {
      let attributeDescendants = response.data[attributeEntity];
      resolution(attributeDescendants);
    }); //{lang: window.getLang() });
  });
} // is_ancestor(treeIndex: String, lang: String = "en")


async function promiseGetAncestorsAttributes(attributeEntity, attributesValuesIds, treeIndex) {
  return new Promise(async function (resolution, rejection) {
    // "begins_with": "_starts_with", 
    var filters = {
      'name_in': attributesValuesIds
    };
    var selectionSet = ['is_ancestor(treeIndex: $treeIndex, lang: $lang)'];
    var variablesDeclarations = {
      "$lang": "String",
      "$treeIndex": "String"
    }; //var variablesDeclarations = {"$treeIndex": "String"};

    let query = ArcheoRequests.createGraphqlQuery(attributeEntity, selectionSet, filters, variablesDeclarations);
    ArcheoRequests.queryGraphQL(query, response => {
      let attributeAncestors = response.data[attributeEntity];
      attributeAncestors = attributeAncestors.map(el => el.is_ancestor);
      attributeAncestors = attributeAncestors.filter(ancestor => ArcheoUtilities.isValid(ancestor));
      resolution(attributeAncestors);
    }, {
      lang: window.getLang(),
      treeIndex: treeIndex
    });
  });
}

async function promiseGetAttributesByTreeLevel(attributeEntity, attributesValuesIds, treeLevel) {
  return new Promise(async function (resolution, rejection) {
    var filters = {
      'name_in': attributesValuesIds
    };
    var selectionSet = ['get_ancestor(treeLevel: $treeLevel, lang: $lang)'];
    var variablesDeclarations = {
      "$lang": "String",
      "$treeLevel": "Int"
    };
    let query = ArcheoRequests.createGraphqlQuery(attributeEntity, selectionSet, filters, variablesDeclarations);
    ArcheoRequests.queryGraphQL(query, response => {
      let attributeAncestors = response.data[attributeEntity];
      attributeAncestors = attributeAncestors.map(el => {
        return el.get_ancestor;
      });
      attributeAncestors = attributeAncestors.filter(ancestor => ArcheoUtilities.isValid(ancestor) && ancestor.path_length > -1);
      resolution(attributeAncestors);
    }, {
      lang: window.getLang(),
      treeLevel: treeLevel
    });
  });
}

async function promiseFitlerAttributesByTreeLevel(attributeEntity, attributesValuesIds, treeLevelFrom, treeLevelTo) {
  return new Promise(async function (resolution, rejection) {
    var filters = {
      'name_in': attributesValuesIds,
      'depth_gte': treeLevelFrom,
      'depth_lte': treeLevelTo
    };
    var selectionSet = ['name']; //var variablesDeclarations = {"$lang": "String"};

    var variablesDeclarations = {};
    let query = ArcheoRequests.createGraphqlQuery(attributeEntity, selectionSet, filters, variablesDeclarations);
    ArcheoRequests.queryGraphQL(query, response => {
      let attributeObjects = response.data[attributeEntity];
      resolution(attributeObjects);
    }, {//lang: window.getLang()
    });
  });
}

function initializeTreeSearch($inputEl, attributeId) {
  if (ArcheoUtilities.isValid($inputEl.autocomplete('instance'))) $inputEl.autocomplete("destroy");
  ArcheoSearcher.initialize($inputEl, attributeId, 'treeIndex', 'name', 'synonym', window.getLang(), function (event, ui) {
    $inputEl.attr('searched-label', ui.item.label);
    $inputEl.attr('searched-value', ui.item.value);
  }, function (event, ui) {
    let queryAttributeValue = $inputEl.attr('searched-label');
    let label = ArcheoUtilities.isStringUndefined(queryAttributeValue) ? '' : queryAttributeValue;
    $inputEl.val(label);
  });
}

function updateTreeLevelSlider($treeLevelClusteringPanel, $treeLevelSlider, attributeId, attributeType, data = {}) {
  if (attributeType === 'tree') {
    $treeLevelClusteringPanel.removeClass('hidden');
    let allAttributes = MapUtilities.getAttributesDict();
    let attributeEntity = allAttributes[attributeId].entity;
    let minLevel = metadata[attributeEntity].minDepth;
    let maxLevel = metadata[attributeEntity].maxDepth;
    $treeLevelSlider.data("ionRangeSlider").update({
      min: minLevel,
      max: maxLevel,
      ...data
    });
  } else {
    $treeLevelClusteringPanel.addClass('hidden');
  }
}


;// CONCATENATED MODULE: ./views/pages/map/js/events/ui/right-sidebar/clustering/utilities.js


function clusterSettingSliderEventSetup(sliderObj, settingName, callerName = 'onChange') {
  $(sliderObj.input).on('update select-features-clustering cluster-strategy-change', function (event, data) {
    sliderObj.update({});
  });

  var eventFunction = async function (data) {
    let value;
    if (sliderObj.options.type === 'double') value = [data.from, data.to];else value = data.from;
    if (settingName === 'range') ArcheoEvents.broadcast(['cluster-setting-change', 'cluster-range-change'], null, {
      setting: settingName,
      value: value
    });else ArcheoEvents.broadcast(['cluster-setting-change'], null, {
      setting: settingName,
      value: value
    });
  };

  let updateDict = {};
  updateDict[callerName] = eventFunction;
  updateDict.onUpdate = eventFunction;
  sliderObj.update(updateDict);
}

function clusterConfigCheckboxEventSetup(selector, configName, refresh) {
  $(selector).on('select-features-clustering cluster-strategy-change', function (event, data) {
    $(selector).trigger('update');
  });
  $(selector).on('click update', function (event) {
    let config = {};
    if (event.type === 'click')
      /* The class did not managed to switch yet, so the check must be negated for true value */
      config[configName] = !$(selector).hasClass('active'); // negation applied intentionally
    else config[configName] = $(selector).hasClass('active');
    ArcheoEvents.broadcast('cluster-config-change', null, {
      config: config,
      refresh: refresh
    });
  });
}

function clusterConfigRadiobuttonEventSetup(radiobuttonWrapper, configName) {
  $(radiobuttonWrapper).on('select-features-clustering cluster-strategy-change', function (event, data) {
    //$(checkboxObj).find("[checked='']").trigger('update');
    $(radiobuttonWrapper).trigger('update');
  });
  $(radiobuttonWrapper).on('change update', 'input', null, function (event) {
    var $input = $(event.target);
    let config = {};
    config[configName] = $input.attr('value');
    ArcheoEvents.broadcast('cluster-config-change', null, {
      config: config
    });
  });
}

function clusterRegionShowCheckboxEventSetup(selector, configName) {
  $(selector).on('select-features-clustering cluster-strategy-change', function (event, data) {
    $(selector).trigger('update');
  }); // layer has changed event

  $(selector).on('click update', function (event) {
    let config = {};
    if (event.type === 'click')
      /* The class did not managed to switch yet, so the check must be negated for true value */
      config[configName] = !$(selector).hasClass('active'); // negation applied intentionally
    else config[configName] = $(selector).hasClass('active');
    ArcheoEvents.broadcast(['cluster-region-show', 'cluster-config-change'], null, {
      config: config
    });
  });
}
/* Assign regions ids to objects */


function promiseIncorporatingRegionsIds(regionsTypeId, featuresDict, objectId) {
  return new Promise((resolution, rejection) => {
    let featuresIds = Object.keys(featuresDict);
    var filters = {
      'id_in': featuresIds
    };
    var selectionSet = ['id', 'regionsIds(type: $type)'];
    var variablesDeclarations = {
      "$type": "String"
    };
    let query = ArcheoRequests.createGraphqlQuery(objectId, selectionSet, filters, variablesDeclarations);
    let variables = {
      type: regionsTypeId
    };
    ArcheoRequests.queryGraphQL(query, response => {
      let regionsIds = response.data[objectId];
      /* Incorporate it with features */

      regionsIds.forEach(info => {
        if (info.regionsIds.length > 0) {
          featuresDict[info.id].forEach(f => {
            f.get('properties').regionsIds = info.regionsIds;
            f.set('regionsIds', info.regionsIds, true);
          });
        } else {
          featuresDict[info.id].forEach(f => {
            f.get('properties').regionsIds = [];
            f.set('regionsIds', [], true);
          });
        }
      });
      resolution(true);
    }, variables);
  });
}


;// CONCATENATED MODULE: ./views/pages/entity/js/events/ui/regions.js



function initializeRegionEvents() {
  $("#regions-select").on('changed.bs.select', function (event) {
    let $select = $(event.target);
    let regionId = $select.val()[0] || null;
    let isRegionChoosen = ArcheoUtilities.isValid(regionId);
    /* Default clustering */

    let defaultClusterConfig = {
      method: {
        region: null,
        distance: null
      }
    };
    /* Region clustering */

    let clusterConfig = {
      method: {
        region: regionId,
        distance: null
      }
    }; // Update session with new region setting

    ArcheoSession.get().clustering.features = { ...ArcheoSession.get().clustering.features,
      ...clusterConfig
    };

    if (isRegionChoosen) {
      promiseFetchRegionsBasicData(regionId).then(isFetchingSuccessful => {
        if (isFetchingSuccessful) {
          let featuresDict = ArcheoMap.getAllFeaturesDictGroupedByObjectId(window.datasetId);
          let objectsIds = Object.keys(featuresDict);
          let promises = [];
          objectsIds.forEach(objectId => {
            promises.push(promiseIncorporatingRegionsIds(regionId, featuresDict[objectId], objectId));
          });
          Promise.all(promises).then(successFlags => {
            let didAllSucceeded = true;
            successFlags.forEach(hasSucceeded => {
              if (!hasSucceeded) {
                didAllSucceeded = false;
                console.error('[ERROR] Regions have not been fetched');
                return false;
              }
            });
            /*let areThereAnyRegionsForFeature = !ArcheoUtilities.isEmpty(window.entityFeature.regionsIds);
             // If no regions were found for the entity //
            if( !didAllSucceeded || !ArcheoUtilities.isValid(regionId) ) { // Fix for sampling: do not refresh regions layer on sampling, only load up ragions data for features
                clusterConfig = defaultClusterConfig;
                ArcheoSession.get().clustering.features.method = defaultClusterConfig.method;
            }*/

            ArcheoEvents.broadcast(['cluster-strategy-change'], null, {
              config: clusterConfig
            });
          });
        }
      });
    } else {
      ArcheoEvents.broadcast(['cluster-strategy-change'], null, {
        config: clusterConfig
      });
      $("#region-wrapper").addClass('hidden');
    }
  });
  $("#region-wrapper").on('map-regions-updated', function (event) {
    let $wrapper = $(event.target);
    let session = ArcheoSession.get();
    let entityMapFeature = ArcheoMap.getMapLayerFeatures(window.layerId)[0];

    if (ArcheoUtilities.isValid(entityMapFeature)) {
      let regionId = entityMapFeature.getProperties().regionId;

      if (ArcheoUtilities.isValid(regionId)) {
        let regionData = ArcheoMap.getMapRegions()[regionId];
        let regionDatingString = ArcheoUtilities.isValid(regionData.dating) ? '<br>(' + ArcheoUtilities.getFormattedYear(regionData.dating.year_start) + '&nbsp;&nbsp;&#8212;&nbsp;&nbsp;' + ArcheoUtilities.getFormattedYear(regionData.dating.year_end) + ')' : '';
        $('#region-name').html(regionData.name + regionDatingString);
      } else {
        $('#region-name').html('-');
      }
    } else {
      let defaultClusterConfig = {
        method: {
          region: null,
          distance: null
        }
      };
      session.clustering.features.method = defaultClusterConfig.method;
      ArcheoEvents.broadcast(['cluster-strategy-change'], null, {
        config: defaultClusterConfig
      });
      $('#region-name').html('-');
    }

    $wrapper.removeClass('hidden');
  });
  $("#regions-list-wrapper").on('map-regions-updated', function (event) {});
}

/* harmony default export */ const regions = (initializeRegionEvents);
;// CONCATENATED MODULE: ./views/pages/entity/js/events/ui/index.js






function initializeUIEvents() {
  map_options();
  source();
  results();
  download();
  regions();
}

/* harmony default export */ const ui = (initializeUIEvents);
;// CONCATENATED MODULE: ./views/pages/entity/js/events/index.js



function initializePageEvents() {
  map();
  ui();
}

/* harmony default export */ const events = (initializePageEvents);
;// CONCATENATED MODULE: ./views/pages/entity/js/elements/map.js
function initializeMapWrapper(map) {
  let $wrapper = $('#map-wrapper');
  $wrapper.resizable({
    //containment: "#legend-panel",
    minHeight: $wrapper.css('min-height'),
    handles: "s"
    /*resize: function( event, ui ) {
    	map.updateSize();
      }*/

  });
  $wrapper.resize(function () {
    map.updateSize();
  });
}

function initializeInteractiveMap(lang) {
  let mapInfo = ArcheoSession.get().map;
  let featureCoordinates = window.entityFeature.coordinates;
  var mapConfig = {
    mapInitialCenter: [featureCoordinates.longitude, featureCoordinates.latitude],
    dataProjection: mapInfo.dataProjection,
    mapProjection: mapInfo.mapProjection,
    mapInitialZoom: mapInfo.zoom,
    mapDOMObjectId: "map",
    // #map
    basemapName: 'Imagery',
    //'Light',
    controlsNames: [],
    interactionsNames: 'all' //['defaults']

  };
  let map = ArcheoMap.initializeMap(mapConfig, lang);
  ArcheoMap.setBasemap('Imagery');
  return map;
}

function initializeMapElements() {
  let map = initializeInteractiveMap(); // lang?

  initializeMapWrapper(map);
}

/* harmony default export */ const elements_map = (initializeMapElements);
;// CONCATENATED MODULE: ./views/pages/entity/js/elements/results.js
function initializeAdmixtureResults() {
  $('#admixtures-wrapper .object-content').sortable({
    placeholder: "sortable-placeholder",
    //handle: ".handle",
    delay: 250,
    opacity: 0.7
  }); //ArcheoCache.setTemporaryEntry('entityLayerId');
}

function initializeUMAPResults() {
  $('#umap-wrapper .object-content').sortable({
    placeholder: "sortable-placeholder",
    //handle: ".handle",
    delay: 250,
    opacity: 0.7
  });
}

function initializePCAResults() {
  $('#pca-wrapper .object-content').sortable({
    placeholder: "sortable-placeholder",
    delay: 250,
    opacity: 0.7
  });
}

function initializeResultsElements() {
  initializeAdmixtureResults();
  initializeUMAPResults();
  initializePCAResults();
}

/* harmony default export */ const elements_results = (initializeResultsElements);
;// CONCATENATED MODULE: ./views/pages/entity/js/elements/index.js

 //import initializeMapLegend from './legend.js';

function initializePageElements() {
  elements_map();
  ArcheoUI.initializeYearTexts();
  elements_results();
}

/* harmony default export */ const js_elements = (initializePageElements);
;// CONCATENATED MODULE: ./views/pages/entity/js/session/data/lang_defaults.js
/* harmony default export */ const lang_defaults = ({
  "en": {
    "_meta": {
      "name": "Remains page",
      "description": "Remains page session",
      "lang": "en",
      "creationDate": "Fri Jan 14 2022 14:00:45 GMT+0100 (Central European Standard Time)",
      "editDate": "Fri Jan 14 2022 22:00:45 GMT+0100 (Central European Standard Time)",
      "hash": ""
    },
    "layers": {
      "_order": [],
      "_counter": 0
    },
    "datasets": {
      "_order": [],
      "_counter": 0
    },
    "clustering": {
      "features": {
        "range": 1000,
        "distance": 0,
        "useCentroids": true,
        "showRegions": true,
        "labelPosition": "cluster",
        "method": {
          "distance": null,
          "region": null
        }
      },
      "attributes": {}
    },
    "filters": {
      "timeline": {
        "isActive": false,
        "yearFrom": -33000,
        "yearTo": -27000,
        "minYear": window.metadata.TimePeriod.minYear,
        "maxYear": window.metadata.TimePeriod.maxYear
      },
      "attributes": {
        "isActive": false,
        "available": [],
        "configs": {}
      },
      "regions": {
        "isActive": false
      }
    },
    "legend": {
      "attributes": {
        "OTHER": {
          "color": "rgba(126,126,126,1.0)",
          "name": "OTHER",
          "filtered": false,
          "group": null
        },
        "MISSING": {
          "color": "rgba(0,0,0,1.0)",
          "name": "MISSING",
          "filtered": true,
          "group": null
        }
      },
      "regions": {
        "DEFAULT": {
          "name": "Region",
          "color": {
            "background": "rgba(197, 209, 220, 0.3)",
            "stroke": "rgba(38, 83, 122, 1.0)"
          }
        }
      }
    },
    "map": {
      "position": [19.657016, 52.205848],
      "zoom": 4,
      "dataProjection": "EPSG:4326",
      "mapProjection": "EPSG:3857",
      "baseLayers": {}
    }
  }
});
;// CONCATENATED MODULE: ./views/pages/entity/js/session/data/layer_default.js

/* harmony default export */ const layer_default = ({
  "positionOffsetRatio": 1.5,
  "positionOffsetRelativeToggle": true,
  "displayLabelProperty": true,
  "cardinalityByValue": false,
  "cardinalityBySize": false,
  "cardinalityByColor": false,
  "size": [6, 24],
  "fontSizeRatio": 1.3,
  "weightGrowth": "none",
  "weightGrowthFactor": 1,
  "weightScalingFactor": 1,
  "standardisationMethod": "none",
  "valueDisplay": "count",
  "blur": 100,
  "radius": 100,
  "drawingAlpha": 1,
  "blendingMode": "normal",
  "layerNameToggle": false,
  "color": _colors.palette_primary_color,
  "gradient": ["#fff7f7", "#d36464", "#990b0b"],
  "colorToggle": true,
  "pointerToggle": true,
  "angle": 0,
  "componentValues": {
    "special": {
      "MISSING": false,
      "OTHER": true
    },
    "data": "selectAll"
  },
  "piechartLabelsAppearance": "hover",
  "piechartLabelsShowPercent": false,
  "piechartLabelsShowCountData": true,
  "piechartLabelsSizeRatio": 1,
  "piechartLabelsOffsetRatio": 1,
  "otherRatio": 0.02,
  "otherCount": 1,
  "bodyToggle": true,
  "showFullStop": false,
  "padding": 0.15,
  "seed": 0.25,
  "outlineSizeRatio": 1,
  "backgroundSizeRatio": 0.92,
  "strategy": "archimedean"
});
;// CONCATENATED MODULE: ./views/pages/entity/js/session/index.js



function registerSessionFunctions() {
  ArcheoSession.addDatasetWithId = function (datasetId, objectId = '', databaseName = '', entityName = '', queryString = '') {
    ArcheoSession.get().datasets[datasetId] = {
      name: datasetId,
      objectId: objectId,
      databaseName: databaseName,
      entityName: entityName,
      query: queryString,
      samplingRatio: 1
    };

    ArcheoSession.get().datasets._order.push(datasetId);

    ArcheoSession.get().datasets._counter += 1;
    return datasetId;
  };

  ArcheoSession.addDataset = function (objectId = '', databaseName = '', entityName = '', queryString = '') {
    let datasetsNumber = ArcheoSession.get().datasets._counter + 1 || 1;
    let datasetId = `${objectId}_${datasetsNumber}`;
    addDatasetWithId(datasetId, objectId, databaseName, entityName, queryString);
    return datasetId;
  };

  ArcheoSession.removeDatasets = function (datasetId = null) {
    if (datasetId === null) {
      let datasetIds = ArcheoSession.get().datasets._order.clone();

      datasetIds.forEach(datasetId => {
        ArcheoSession.removeDatasets(datasetId);
      });
    } else {
      delete ArcheoSession.get().datasets[datasetId];

      ArcheoSession.get().datasets._order.removeEl(datasetId);
    }
  };

  ArcheoSession.getDefaultLayerStyle = function () {
    return ArcheoUtilities.deepCloneObject(layer_default);
  };

  ArcheoSession.addLayer = function (layerId = null) {
    var layerNumber = ArcheoSession.get().layers._counter + 1 || 1;
    var zIndex = ArcheoMap.getLayerZIndex(layerNumber);
    if (layerId === null) layerId = 'layer_' + layerNumber;
    ArcheoSession.get().layers[layerId] = {
      layerId: layerId,
      type: '',
      datasetId: '',
      attributeId: '',
      attributeName: '',
      attributeType: '',
      //attributeValue: '',
      style: ArcheoSession.getDefaultLayerStyle(),
      settings: {
        zIndex: zIndex,
        opacity: 1.0,
        visible: true,
        title: "Layer #" + layerNumber
      }
    };
    ArcheoCache.getTemporaryEntry('styleCache')[layerId] = {};
    ArcheoCache.getTemporaryEntry('canvasCache')[layerId] = {};
    ArcheoCache.getTemporaryEntry('featuresClusters')[layerId] = {};
    /* Create cache entry for layer clusters */

    ArcheoCache.setSessionEntry(layerId, {}, 'object'); // Since clusters are features as well, they could be parsed as geojson, excluding their features

    ArcheoSession.get().layers._order.push(layerId);

    ArcheoSession.get().layers._counter += 1;
    return layerId;
  };

  ArcheoSession.removeLayers = function (layerId = null) {
    if (layerId === null) {
      let layerIds = ArcheoSession.get().layers._order.clone();

      layerIds.forEach(layerId => {
        ArcheoSession.removeLayers(layerId);
      });
    } else {
      delete ArcheoSession.get().layers[layerId];

      ArcheoSession.get().layers._order.removeEl(layerId);
    }
  };

  ArcheoSession.getAttributeLegend = function (attributeId, getOnlyAttributes = false, includeGroupingInfo = false, ignoreSpecialAttributes = false) {
    let legend = ArcheoSession.get().legend.attributes;
    let attributesNames = Object.keys(ArcheoCache.getAttributeCache(attributeId));
    if (!(attributeId in legend)) legend[attributeId] = {
      '_groups': []
    };
    legend = legend[attributeId];
    let attributesLegend = {};

    if (getOnlyAttributes) {
      for (let i = 0; i < attributesNames.length; ++i) {
        let attributeName = attributesNames[i];
        let entryName = attributeName;
        /* Ignore special attributes */

        if (!ArcheoUtilities.isValid(legend[attributeName].special)) {
          if (includeGroupingInfo) {
            let groupName = legend[attributeName].group;

            if (ArcheoUtilities.isValid(groupName)) {
              entryName = groupName; //attributesLegend[groupName] = legend[groupName];
            }
          }
        }

        if (ignoreSpecialAttributes) {
          if (!ArcheoUtilities.isValid(legend[attributeName].special)) attributesLegend[entryName] = legend[entryName];
        } else attributesLegend[entryName] = legend[entryName];
      }
    } else {
      attributesLegend = legend;
    }

    return attributesLegend;
  };

  ArcheoSession.getAdmixtureLegend = function (attributeId, getOnlyAttributes = false, ignoreSpecialAttributes = true) {
    let legend = ArcheoSession.get().legend.attributes;
    if (!(attributeId in legend)) legend[attributeId] = {
      '_groups': [],
      '_order': []
    };
    legend = legend[attributeId];
    let attributesLegend = {};

    if (getOnlyAttributes) {
      for (let i = 0; i < legend._order.length; ++i) {
        let entryName = legend._order[i];
        attributesLegend[entryName] = legend[entryName];
      }
    } else {
      attributesLegend = legend;
    }

    if (ignoreSpecialAttributes === false) {
      if ('OTHER' in legend) attributesLegend.OTHER = legend.OTHER;
      if ('MISSING' in legend) attributesLegend.MISSING = legend.MISSING;
    }

    return attributesLegend;
  };

  ArcheoSession.getAttributeGroupsList = function (attributeId) {
    let legend = ArcheoSession.get().legend.attributes;
    if (!(attributeId in legend)) legend[attributeId] = {
      '_groups': []
    };
    return legend[attributeId]._groups;
  };

  ArcheoSession.getAttributeGroupsLegend = function (attributeId) {
    let legend = ArcheoSession.get().legend.attributes;
    if (!(attributeId in legend)) legend[attributeId] = {
      '_groups': []
    };
    legend = legend[attributeId];
    let groupsKeys = legend._groups;
    let groupsLegend = {};
    groupsKeys.forEach(key => {
      groupsLegend[key] = legend[key];
    });
    return groupsLegend;
  };

  ArcheoSession.getRegionLegend = function (regionTypeId, getOnlyRegions = false) {
    let legend = ArcheoSession.get().legend.regions;
    if (!(regionTypeId in legend)) legend[regionTypeId] = {
      '_groups': []
    };
    legend = legend[regionTypeId];
    if (getOnlyRegions) legend = ArcheoUtilities.filterObject(legend, ([key]) => !key.startsWith('_'));
    return legend;
  };

  ArcheoSession.load = function (sessionId) {
    let newSession = ArcheoCache.getSession(sessionId);

    if (ArcheoUtilities.isValid(newSession)) {
      let doLoadLayers = ArcheoUtilities.isValid(newSession.layers);
      let doLoadDatasets = ArcheoUtilities.isValid(newSession.datasets);
      let oldSession = ArcheoSession.get();
      /* Remove old datasets and layers if they are about to be overwritten */

      if (doLoadDatasets) {
        if (ArcheoUtilities.isValid(oldSession.datasets)) {
          let oldDatasetsIds = ArcheoSession.get().datasets._order.clone();

          MapUtilities.removeDatasets(oldDatasetsIds);
        }
      }

      if (doLoadLayers) {
        if (ArcheoUtilities.isValid(oldSession.layers)) {
          let oldLayersIds = ArcheoSession.get().layers._order.clone();

          MapUtilities.removeLayers(oldLayersIds);
        }
      }
      /* Load up new session */


      ArcheoCache.loadSession(newSession);

      if (doLoadDatasets) {
        let newDatasetsIds = newSession.datasets._order;
        MapUtilities.loadDatasets(newDatasetsIds).then(() => {
          if (doLoadLayers) {
            let newLayersIds = newSession.layers._order;
            MapUtilities.loadLayers(newLayersIds).then(() => {
              ArcheoEvents.broadcast('session-load');
            });
          }
        });
      } else if (doLoadLayers) {
        let newLayersIds = newSession.layers._order;
        MapUtilities.loadLayers(newLayersIds).then(() => {
          ArcheoEvents.broadcast('session-load');
        });
      } else {
        ArcheoEvents.broadcast('session-load');
      }

      return sessionId;
    } else {
      return false;
    }
  };
}

function initializeSessionState(entityFeature) {
  let session = ArcheoSession.get();
  /* Time filter */

  if (ArcheoUtilities.isValid(entityFeature.dating)) {
    session.filters.timeline.yearFrom = entityFeature.dating.year_start;
    session.filters.timeline.yearTo = entityFeature.dating.year_end;
  }

  session.filters.timeline.showPresent = true;
  session.filters.timeline.isActive = true;
  session.filters.timeline.showPropability = false;
  /* Regions options */

  session.clustering.features.useCentroids = false;
  session.clustering.features.showRegions = true;
  session.clustering.features.labelPosition = "region";
  /* Layer options */

  session.layers[layerId].style.color = _colors.palette_secondary_color_darker;
}


;// CONCATENATED MODULE: ./views/mixins-pug/toggle-arrow/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const toggle_arrow_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/accordion-header/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const accordion_header_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/icon-text-list/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const icon_text_list_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/icon-radiobuttons/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const icon_radiobuttons_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/dropdown/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const dropdown_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/custom-button/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const custom_button_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/years-range-spinner/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const years_range_spinner_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/mixins-pug/textbox/style.scss
// extracted by mini-css-extract-plugin
/* harmony default export */ const textbox_style = ({"palette_primary_color":"#13446f","palette_primary_color_light":"#26537a","palette_primary_color_lightest":"#c5d1dc","palette_primary_color_dark":"#113d64","palette_primary_color_darkest":"#0d304e","palette_secondary_color":"#ffad42","palette_secondary_color_darker":"#d4861f","palette_tertiary_color_light":"#afafaf","palette_tertiary_color_lightest":"#ddd","palette_tertiary_color_lighter":"#cecece","palette_tertiary_color":"#474747","palette_tertiary_color_dark":"#2c2c2c","palette_tertiary_color_darker":"#222","palette_tertiary_color_darkest":"#141414","text_color_light":"#e6e6e6","text_color_dark":"#222","text_color_dark_faded":"#646464","background_color_light":"#eee","background_color_lightest":"#f7f7f7","present_time_color_array_string":"119,0,255,1","text_color_light_faded":"#d2d2d2"});
;// CONCATENATED MODULE: ./views/pages/plot/data/queriesData.json
const queriesData_namespaceObject = JSON.parse('{"PCA":{"selectionSet":["plot_data"]},"UMAP":{"selectionSet":["plot_data"]},"default":{}}');
;// CONCATENATED MODULE: ./views/pages/plot/utilities.js


function registerAnalysisUtilities() {
  window.AnalysisUtilities = {};

  AnalysisUtilities.getSelectedResultsInfo = function () {
    return [$('#select-pca :selected').val(), // entityId
    $('#select-pca :selected').text() + '_' + $('#select-dataset :selected').val(), //resultTypeName
    $('#select-pca :selected').text() + ' ' + $('#select-dataset :selected').text() // resultTypeDisplayName
    ];
    /*
    return {
        entityId: $('#select-pca :selected').val(),
        resultTypeName: $('#select-pca :selected').text() + '_' + $('#select-dataset :selected').val(),
        resultTypeDisplayName: $('#select-pca :selected').text() + ' ' + $('#select-dataset :selected').text()
    }*/
  }; // function was async before


  AnalysisUtilities.queryAndDisplayResults = function (plotId, entityId, resultTypeName, resultTypeDisplayName, plotlyOptions = {}) {
    return new Promise((resolution, rejection) => {
      setTimeout(() => {
        // Prevents error on plotId element not found in the DOM
        let resultsCache = ArcheoCache.getTemporaryEntry('resultsCache');
        let entityCache = resultsCache[resultTypeName];

        if (!ArcheoUtilities.isValid(entityCache)) {
          let entityQueriesData = ArcheoRequests.getEntityQueryData(queriesData_namespaceObject, entityId);
          let filters = {
            'this_is_resulttype': {
              'ResultType': {
                'id': resultTypeName
              }
            }
          };
          let query = ArcheoRequests.createGraphqlQuery(entityId, entityQueriesData['selectionSet'], filters, entityQueriesData['variablesDeclarations'] //{'$lang': 'String'}
          );
          ArcheoRequests.queryGraphQL(query, response => {
            let results = response.data[entityId];
            results = results.map(result => {
              return {
                id: result.plot_data.sample_id,
                label: result.plot_data.pop_name,
                x: result.plot_data.points[0],
                y: result.plot_data.points[1]
              };
            });
            resultsCache[resultTypeName] = results;
            ArcheoUI.createPlotly(plotId, results, resultTypeDisplayName, plotlyOptions);
            resolution(plotId);
          });
        } else {
          ArcheoUI.createPlotly(plotId, entityCache, resultTypeDisplayName, plotlyOptions);
          resolution(plotId);
        }
      }, 1000);
    });
  };
}

/* harmony default export */ const utilities = (registerAnalysisUtilities);
// EXTERNAL MODULE: ./views/pages/entity/index.pug
var entity = __webpack_require__(6940);
;// CONCATENATED MODULE: ./views/pages/entity/js/cache/index.js
function registerCacheFunctions() {
  ArcheoCache.removeLayer = function (layerId) {
    delete ArcheoCache.getTemporaryEntry('styleCache')[layerId];
    delete ArcheoCache.getTemporaryEntry('canvasCache')[layerId];
    delete ArcheoCache.getTemporaryEntry('featuresClusters')[layerId];
    delete ArcheoCache.getTemporaryEntry('layers')[layerId];
  };

  ArcheoCache.removeDataset = function (datasetId) {
    delete ArcheoCache.getTemporaryEntry('sources')[datasetId];
    delete ArcheoCache.getTemporaryEntry('datasets')[datasetId];
  };

  ArcheoCache.addDataset = function (datasetId, features) {
    ArcheoCache.getTemporaryEntry('datasets')[datasetId] = features;
  };

  ArcheoCache.getDataset = function (datasetId) {
    return ArcheoCache.getTemporaryEntry('datasets')[datasetId];
  };

  ArcheoCache.getDatasetFeatures = function (datasetId) {
    var features = ArcheoCache.getDataset(datasetId);
    if (ArcheoUtilities.isValid(features)) return ArcheoMap.readFeaturesAsGeoJSON(features);else return [];
  };

  ArcheoCache.addSession = function (sessionDict) {
    let importedSessions = ArcheoCache.getTemporaryEntry('importedSessions');
    let sessionsNumber = importedSessions._counter + 1 || 1;
    let sessionId = `session-${sessionsNumber}`;
    importedSessions[sessionId] = sessionDict;

    importedSessions._order.push(sessionId);

    importedSessions._counter += 1;
    return sessionId;
  };

  ArcheoCache.updateSession = function (sessionId) {
    let importedSessions = ArcheoCache.getTemporaryEntry('importedSessions');
    let updatedSession = importedSessions[sessionId];
    let currentSessionState = ArcheoUtilities.deepCloneObject(ArcheoSession.get());
    delete currentSessionState['_meta'];
    updatedSession = ArcheoUtilities.deepExtend(updatedSession, currentSessionState);
    updatedSession._meta.editDate = ArcheoUtilities.getCurrentDateString();
    importedSessions[sessionId] = updatedSession;
    return updatedSession;
  };

  ArcheoCache.getSessionsDict = function () {
    return ArcheoCache.getTemporaryEntry('importedSessions');
  };

  ArcheoCache.getSession = function (sessionId, copy = false) {
    let importedSessions = ArcheoCache.getTemporaryEntry('importedSessions');
    if (copy === true) return ArcheoUtilities.deepCloneObject(importedSessions[sessionId]);else return importedSessions[sessionId];
  };

  ArcheoCache.removeSession = function (sessionId) {
    delete ArcheoCache.getTemporaryEntry('importedSessions')[sessionId];

    ArcheoCache.getTemporaryEntry('importedSessions')._order.removeEl(sessionId);
  };

  ArcheoCache.createAttributeEntry = function (attributeId, value) {
    let attributeCache = ArcheoCache.getTemporaryEntry('attributes');
    if (!(attributeId in attributeCache)) attributeCache[attributeId] = {};
    attributeCache[attributeId][value] = true;
  };

  ArcheoCache.clearAttributeCache = function (attributeId) {
    let attributeCache = ArcheoCache.getTemporaryEntry('attributes');
    attributeCache[attributeId] = {};
  };

  ArcheoCache.getAttributeCache = function (attributeId) {
    let attributeCache = ArcheoCache.getTemporaryEntry('attributes');
    if (!(attributeId in attributeCache)) attributeCache[attributeId] = {};
    return attributeCache[attributeId];
  };
}

function cacheInitialization() {
  ArcheoCache.setTemporaryEntry('datasetsFeaturesToDownload', {});
  ArcheoCache.setTemporaryEntry('styleCache', {
    'vector-regions': {}
  });
  ArcheoCache.setTemporaryEntry('regionsNamesCache', {});
  ArcheoCache.setTemporaryEntry('canvasCache', {});
  ArcheoCache.setTemporaryEntry('attributeClustering', {});
  ArcheoCache.setTemporaryEntry('attributeFiltering', {});
  ArcheoCache.setTemporaryEntry('$symbol', null);
  ArcheoCache.setTemporaryEntry('featuresClusters', {});
  ArcheoCache.setTemporaryEntry('layers', {});
  ArcheoCache.setTemporaryEntry('datasets', {});
  ArcheoCache.setTemporaryEntry('sources', {});
  ArcheoCache.setTemporaryEntry('selectedFeatures', {});
  ArcheoCache.setTemporaryEntry('attributes', {});
  ArcheoCache.setTemporaryEntry('importedSessions', {
    _order: [],
    _counter: 0
  });
  ArcheoCache.setTemporaryEntry('resultsCache', {});
  ArcheoCache.setTemporaryEntry('map', null);
  ArcheoCache.setTemporaryEntry('baseLayers', {
    'vectorDraggable': null,
    'regionsLayer': null
  });
  /* Keep track of the open features modals count */

  ArcheoCache.setTemporaryEntry('features-modals-count', 0);
}


/*

    if( ! ArcheoUtilities.exists( document.documentElement.lang ) )
		document.documentElement.lang = 'en';

	window.getLang = () => { return document.documentElement.lang };

*/
;// CONCATENATED MODULE: ./views/pages/entity/js/entity.js
function createDataset(datasetId, data) {
  ArcheoSession.addDatasetWithId(datasetId, window.entityDbName, '', window.entityType, '');
  let features = ArcheoMap.createFeatures(data, ArcheoSession.get().map.dataProjection, ArcheoSession.get().map.mapProjection);
  let dating = ArcheoUtilities.getDatasetDating(features);
  let geojsonFeatures = ArcheoMap.parseFeaturesToGeoJSON(features);
  ArcheoCache.addDataset(datasetId, geojsonFeatures);
  ArcheoSession.get().datasets[datasetId].dating = dating;
  ArcheoSession.get().datasets[datasetId].size = features.length;
  ArcheoSession.get().datasets[datasetId].isPresent = !ArcheoUtilities.isValid(dating);

  if (features.length === 1) {
    ArcheoSession.get().datasets[datasetId].name = features[0].get('properties').id;
  }

  ArcheoMap.addSource(datasetId);
  ArcheoMap.setDataSourceFeatures(datasetId, features);
  return datasetId;
}

function createLayer(layerId = null) {
  if (layerId === null) layerId = ArcheoSession.addLayer();
  ArcheoMap.addLayer(layerId, {
    declutter: true,
    title: window.entityName,
    ...ArcheoSession.get().layers[layerId].settings
  });
  return layerId;
}

function setLayerDataset(layerId, datasetId) {
  ArcheoSession.get().layers[layerId].datasetId = datasetId;
  ArcheoMap.setLayerDataSource(layerId, datasetId);
}

function setLayerAttribute(layerId, attributeParams) {
  /* Update session */
  ArcheoSession.get().layers[layerId].attributeId = attributeParams.attributeId || '';
  ArcheoSession.get().layers[layerId].attributeName = attributeParams.attributeName || '';
  ArcheoSession.get().layers[layerId].attributeType = attributeParams.attributeType || '';
  ArcheoSession.get().layers[layerId].type = attributeParams.layerType || 'tag';
  let legend = ArcheoSession.getAttributeLegend(attributeParams.attributeId);
  /* Update legend */

  if (!('MISSING' in legend)) legend['MISSING'] = {
    filtered: false,
    name: 'MISSING',
    special: true
  };
  if (!('OTHER' in legend)) legend['OTHER'] = {
    filtered: false,
    name: 'OTHER',
    special: true
  };
  let datasetId = ArcheoSession.get().layers[layerId].datasetId;
  let features = ArcheoMap.getDataSourceFeatures(datasetId);

  for (let i = 0; i < features.length; ++i) {
    ArcheoMap.setupFeatureAttributesData(features[i], layerId);
    let featureValue = features[i].get('decoration')[layerId].attributeValue; // Register attribute value in legend

    if (!(featureValue in legend)) {
      legend[featureValue] = {
        name: featureValue,
        filtered: false,
        color: ArcheoUtilities.randomRGBColorGenerator().toRgbString(),
        group: null
      };
    }
  } // Update map //


  let layer = ArcheoMap.getLayer(layerId);
  ArcheoMap.triggerClusterFilters(layer);
  ArcheoMap.triggerLayerStyleFunction(layer);
}


;// CONCATENATED MODULE: ./views/pages/entity/js/events/broadcastRoutes.json
const broadcastRoutes_namespaceObject = JSON.parse('{"map-modal":["#map"],"cluster-strategy-change":["#map"],"map-regions-updated":["#region-wrapper","#regions-list-wrapper"]}');
;// CONCATENATED MODULE: ./views/pages/entity/app.js
// Styles //

 //import 'ol/ol.css';
// Scripts //


 // Session //


 // Register pug-Mixins //










 //import 'Views/mixins-pug/icon-checkbox/style.scss';



/* Link .pug for assets injection */





/* 'entityData' is variable from router */

$(document).ready(function () {
  /* Initialize Analysis Utilities */
  utilities();
  /*** Initialize page session functions ***/

  registerSessionFunctions();
  window.sessionStorage.clear();
  /*** #0 -- Register events broadcast routes ***/

  ArcheoEvents.setRoutes(broadcastRoutes_namespaceObject);
  /*** Setup temporary cache entries ***/

  registerCacheFunctions();
  cacheInitialization();
  /*** #1 -- Set session ***/

  /*** Set default session ***/

  let defaultSession = lang_defaults[getLang()];
  ArcheoSession.set(defaultSession);
  /*** Fetch the entity ***/

  let datasetId = 'entity';
  window.datasetId = datasetId;
  ArcheoCache.setTemporaryEntry('entityDatasetId', datasetId);
  /*** #2 -- Initialize elements ***/

  /*** Initialize static UI Elements  ***/

  js_elements();
  /*** Initialize static UI Events ***/

  events();
  /*** Initialize map features ***/

  let features = [window.entityFeature];
  createDataset(datasetId, features);
  let layerId = createLayer();
  window.layerId = layerId;
  setLayerDataset(layerId, datasetId);
  initializeSessionState(window.entityFeature);
  setLayerAttribute(layerId, {
    attributeId: 'id',
    attributeName: 'ID',
    attributeType: 'value'
  });
  /* Initialize session options in the UI */
  //ArcheoEvents.broadcast('session-load');

  ArcheoUtilities.setContentLoaded('#loading-page-wrapper', 'body');
});
})();

/******/ })()
;